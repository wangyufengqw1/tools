var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);i.prototype=e.prototype,t.prototype=new i},LoadViewBase=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.initView=function(){this.txt=this._ui.getChild("txt").asTextField,this.imag=this._ui.getChild("imag").asImage,this._initWidth=this.imag.width,this.imag.width=0},e.prototype.setProgress=function(t,e){this.imag.width=t/e*this._initWidth,this.txt.text="加载中："+Math.floor(100*t/e)+"%"},e}(loadUI.BaseLoadingUI);__reflect(LoadViewBase.prototype,"LoadViewBase");var base;!function(t){var e=function(t){function e(e,o,n,s,a,r){void 0===s&&(s=1),void 0===a&&(a=null),void 0===r&&(r=null);for(var l=[],h=6;h<arguments.length;h++)l[h-6]=arguments[h];var c=t.call(this,e,o)||this;return c._message=n,c._button=s,null!=a&&(c._callback=gameTool.poolList.getInstance(i),c._callback.sleep=!1,c._callback.fun=a,c._callback.context=r,c._callback.args=l),c.txt&&(c.txt.text=c._message),c}return __extends(e,t),e.prototype.initView=function(){this.txt=this.getTextField("txt"),this.select=this._ui.getController("select"),this._button==e.OK?this.select.selectedPage="1":this.select.selectedPage="2",this.txt.text=this._message},e.prototype.onClick=function(t){switch(t.currentTarget.name){case"closeButton":case"cannel":null!=this._callback&&(this._callback.args=[e.CANCEL].concat(this._callback.args),this._callback.call()),this.dispose();break;case"ok1":case"ok0":null!=this._callback&&(this._callback.args=[e.OK].concat(this._callback.args),this._callback.call()),this.dispose()}},e.prototype.dispose=function(){null!=this._callback&&(gameTool.poolList.remove(this._callback),this._callback=null),t.prototype.dispose.call(this)},e.OK=1,e.CANCEL=2,e.OK_CANCEL=3,e}(gui.OvBase);t.BaseAlert=e,__reflect(e.prototype,"base.BaseAlert");var i=function(){function t(){}return t.prototype.dispose=function(){this.fun=null,this.context=null,this.args=null},t.prototype.call=function(){this.sleep||("string"==typeof this.fun?this.context[this.fun]=this.args?this.args[0]:null:this.fun.apply(this.context,this.args))},t.prototype.onceCall=function(){this.call(),gameTool.poolList.remove(this),this.dispose()},t}();t.FunctionInfo=i,__reflect(i.prototype,"base.FunctionInfo")}(base||(base={}));var CallBackVo=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.once=!1,this.handeler=t,this.thisObj=e,this.arg=i}return t.prototype.apply=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t&&t.length>0&&(this.arg=t),this.handeler.apply(this.thisObj,this.arg)},t.prototype.free=function(){this.handeler=null,this.thisObj=null,this.arg=null,this.once=null},t}();__reflect(CallBackVo.prototype,"CallBackVo");var CEvent=function(t){function e(e,i,o,n){void 0===i&&(i=null),void 0===o&&(o=!1),void 0===n&&(n=!1);var s=t.call(this,e,o,n)||this;return s._data=i,s}return __extends(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),e}(egret.Event);__reflect(CEvent.prototype,"CEvent");var GameEvent=function(){function t(){}return t.Login="miniGame.Login",t.AaAccountVerify="miniGame.AaAccountVerify",t.CreateAaminiAccount="miniGame.CreateAaminiAccount",t.GetAaminiAccountInfo="miniGame.getaccountinfo",t.GetRenshu="miniGame.GetRenshu",t.ChooseIcon="miniGame.ChooseIcon",t.getingame="miniGame.getingame",t.Getdiaoxianjiance="miniGame.Getdiaoxianjiance",t.kickout="kickout",t.Logout="miniGame.Logout",t.AddCoins="miniGame.AddCoins",t.Loginbyurl="miniGame.Loginbyurl",t.getxintiaobao="miniGame.getxintiaobao",t.xiantao="xiantao",t.connect="connect",t.diaoxian="diaoxian",t.weihu="weihu",t.loginTrue="loginTrue",t.web_closeDoor="closeDoor",t}();__reflect(GameEvent.prototype,"GameEvent");var api;!function(t){function e(t,e,o,n){void 0===e&&(e=1),void 0===o&&(o=null),void 0===n&&(n=null);for(var s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];var r=new(i.bind.apply(i,[void 0,t,e,o,n].concat(s)));return gui.addBox(r),r}var i=function(t){function e(e,i,o,n){void 0===i&&(i=1),void 0===o&&(o=null),void 0===n&&(n=null);for(var s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];return t.call(this,"common","alerView")||this}return __extends(e,t),e.OK=1,e.CANCEL=2,e.OK_CANCEL=3,e}(gui.OvBase);t.Alert=i,__reflect(i.prototype,"api.Alert"),t.createAlert=e}(api||(api={}));var api;!function(t){var e=function(){function e(){}return e.initView=function(e){this.localData=new t.LocalData,this.webSocket=new t.Network,this.userData=new t.UserData,this.moduleManager=new ModuleManager,this.soundManager=new SoundManagers(e),this.publicApi=new PublicAPi},e}();t.GlobalAPI=e,__reflect(e.prototype,"api.GlobalAPI")}(api||(api={}));var api;!function(t){var e=function(){function t(){}return t.prototype.get=function(t){return egret.localStorage.getItem(t)},t.prototype.set=function(t,e){egret.localStorage.setItem(t,e)},t.prototype.remove=function(t){egret.localStorage.removeItem(t)},t}();t.LocalData=e,__reflect(e.prototype,"api.LocalData",["api.ILocalData"])}(api||(api={}));var api;!function(t){var e=function(){function t(){}return t.prototype.Request=function(){},t}();__reflect(e.prototype,"Request");var i;!function(t){t[t.None=0]="None",t[t.Response=1]="Response",t[t.Request=2]="Request",t[t.Notify=3]="Notify"}(i||(i={}));var o=function(){function o(){this.callbacks={},this.requests={},this.losts=[],this.showMessage=!0,this.reconnect=-1,this.timer=null,this.handledMsg=[],this.requestid=egret.getTimer()%2e4}return o.prototype.login=function(e){var i=e;t.GlobalAPI.webSocket.request(GameEvent.Login,{open_id:i},function(t){"登陆成功"==t.msg||"游戏已结束"==t.msg?gui.addScene(DoorView):"游戏未开始"==t.msg||"游戏界面"==t.msg},function(t,e,i){console.error("无法连接游戏服务器,请确认网络连接无异常.[code:%s,msg:%s]",e,i)})},o.prototype.connectServer=function(t,e,i){var o=t.substr(0,t.indexOf(":")),n=parseInt(t.substr(t.indexOf(":")+1,t.length));this.loginCallback=e,this.connect(o,n)&&(e&&e(i),this.loginCallback=null),null!=this.timer&&(this.timer=egret.setInterval(this.timeCheck,this,1e3))},o.prototype.notify=function(t,e){t=t.toLocaleLowerCase();var o={messageType:i.Notify,event:t,sequence:0};if(this.host||!this.port)return this.webSocket&&this.webSocket.connected?void this.write(o,e):(this.losts.push({head:o,param:e}),void this.connect(this.host,this.port))},o.prototype.request=function(t,o,n,s){t=t.toLocaleLowerCase();var a=new e;a.id=this.requestid++,a.event=t,a.param=o||{},a.callback=n,a.errcb=s,this.requests[a.id]=a,this.requestid>=3e4&&(this.requestid=1);var r={messageType:i.Request,event:t,sequence:a.id};return this.webSocket&&this.webSocket.connected?(this.write(r,o),void(a.sendTime=egret.getTimer()/1e3)):(this.losts.push({head:r,param:o}),void this.connect(this.host,this.port))},o.prototype.on=function(t,e,i){t=t.toLocaleLowerCase();var o=this.callbacks[t]||(this.callbacks[t]=[]);i&&(e.errcb=i),-1==o.indexOf(e)&&o.push(e)},o.prototype.off=function(t,e){t=t.toLocaleLowerCase();var i=this.callbacks[t];if(i){if(!e)return void(this.callbacks[t]=[]);for(var o=i.length-1;o>=0;o--)i[o]===e&&i.splice(o,1)}},o.prototype.connected=function(t,e){return this.webSocket&&this.webSocket.connected},o.prototype.requestLost=function(){var t=this;this.losts.forEach(function(e){t.write(e.head,e.param)}),this.losts=[]},o.prototype.close=function(){this.webSocket&&this.webSocket.close()},o.prototype.connect=function(e,i){if(this.webSocket&&this.webSocket.connected&&this.host==e&&this.port==i)return!0;"ON"==t.GlobalAPI.localData.get("ShowDebugMessage")&&(this.showMessage=!0),this.host=e,this.port=i,this.webSocket||(this.webSocket=new egret.WebSocket,this.webSocket.type=egret.WebSocket.TYPE_BINARY,this.webSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.webSocket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.webSocket.addEventListener(egret.Event.CLOSE,this.onClosed,this),this.webSocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this));try{this.webSocket.close();var o=e.split("."),n=!1;for(var s in o)if(!Number(o[s])){n=!0;break}n?egret.setTimeout(this.webSocket.connectByUrl,this.webSocket,0,"wss://"+e):egret.setTimeout(this.webSocket.connect,this.webSocket,0,e,i)}catch(a){this.onError(a)}},o.prototype.onReceiveMessage=function(){var t=new egret.ByteArray;this.webSocket.readBytes(t);var e={messageType:0,srcType:0,srcId:0,descType:0,descId:0,event:"",sequence:0,errcode:0};e.messageType=t.readByte(),e.srcType=t.readByte(),e.srcId=(t.readInt()<<32)+t.readInt(),e.descType=t.readByte(),e.descId=(t.readInt()<<32)+t.readInt(),e.event=t.readUTF().toLocaleLowerCase(),e.sequence=t.readShort(),e.errcode=t.readShort();var o=e.event+"@"+e.sequence;if(!(e.messageType==i.Response&&this.handledMsg.indexOf(o)>-1)){var n=0!=e.errcode?t.readUTF:JSON.parse(t.readUTF()),s=this.callbacks[e.event];if(s)for(var a=0;a<s.length;a++){var r=s[a];if(r)if(e.errcode){var l=r.errcb||this.defaultErrCb;l(e.event,e.errcode,n)}else r(n)}var h=null;if(0!=e.sequence&&(h=this.requests[e.sequence]))if(delete this.requests[e.sequence],e.errcode){var c=h.errcb||this.defaultErrCb;c(e.event,e.errcode,n)}else h.callback&&h.callback(n);s||h||console.error("未监听服务端[%s]消息",e.event),e.messageType==i.Response&&(this.handledMsg.unshift(o),this.handledMsg.length>30&&this.handledMsg.pop())}},o.prototype.timeCheck=function(){var t=egret.getTimer()/1e3;for(var e in this.requests){var o=this.requests[e];if(o.sendTime<t-15e3){o.sendTime=t;var n={messageType:i.Request,event:o.event,sequence:o.id};if(!this.webSocket||this.webSocket.connected)return this.losts.push({head:n,param:o.param}),void this.connect(this.host,this.port);console.log("消息重发：%s, %s",o.event,o.id),this.write(n,o.param)}}},o.prototype.write=function(t,e){var i=new egret.ByteArray;i.writeByte(t.messageType),i.writeShort(t.sequence),i.writeUTF(t.event),i.writeUTF(JSON.stringify(e)),i.position=0,this.webSocket.writeBytes(i,0,i.bytesAvailable)},o.prototype.onSocketOpen=function(){this.loginCallback?(this.loginCallback(this.loginparam),this.loginCallback=null):this.login(this.loginparam)},o.prototype.onClosed=function(){this.webSocket.close()},o.prototype.onError=function(e){var i=this;-1==this.reconnect&&(t.createAlert("网络连接失败3秒后重试",1),this.reconnect=egret.setTimeout(function(){i.connect(i.host,i.port),i.reconnect=-1},this,3e3))},o.prototype.defaultErrCb=function(t,e,i){console.log("消息[%s]处理失败, 错误码:%s, 附加消息:%s",t,e,i)},o}();t.Network=o,__reflect(o.prototype,"api.Network",["api.INetWork"])}(api||(api={}));var api;!function(t){var e=function(){function t(){this.$coins=0}return t.prototype.setUserName=function(t){this.$userName=t},t.prototype.getUserName=function(){return this.$userName},t.prototype.setUserCoins=function(t){this.$coins=t},t.prototype.getUserCoins=function(){return this.$coins},t.prototype.setUserIcon=function(t){this.$icon=t},t.prototype.getUserIcon=function(){return this.$icon},t.prototype.getOpenId=function(){return this.$openId},t.prototype.setOpenId=function(t){this.$openId=t},t}();t.UserData=e,__reflect(e.prototype,"api.UserData",["api.IUserData"])}(api||(api={}));var PublicAPi=function(){function t(){this.gameEvebt={},this.regedEvebt={},this.initEvent()}return t.prototype.initEvent=function(){this.regedEvebt[GameEvent.kickout]=this.kickoutF.bind(this),this.regedEvebt[GameEvent.diaoxian]=this.diaoxian.bind(this),this.eventInit()},t.prototype.diaoxian=function(){api.GlobalAPI.webSocket.request(GameEvent.Getdiaoxianjiance,{})},t.prototype.kickoutF=function(t){"账户已失效，请重新连接"==t?(api.GlobalAPI.publicApi.isOnlie=4,this.eventRemove(),api.createAlert(t,1,function(t){gui.removeAllView()})):"网络已断，请重新连接"==t&&(api.GlobalAPI.publicApi.isOnlie=3,api.createAlert(t,3))},t.prototype.eventInit=function(){if(null!=this.regedEvebt)for(var t in this.regedEvebt)api.GlobalAPI.webSocket.on(t,this.regedEvebt[t])},t.prototype.eventRemove=function(){if(null!=this.regedEvebt)for(var t in this.regedEvebt)api.GlobalAPI.webSocket.off(t,this.regedEvebt[t])},t.prototype.addGameEvebt=function(t,e,i,o){null==this.gameEvebt[t]&&(this.gameEvebt[t]=[]),this.gameEvebt[t][e]=i.bind(o)},t.prototype.gameEvebtInit=function(t){if(null!=this.gameEvebt[t])for(var e in this.gameEvebt[t])api.GlobalAPI.webSocket.on(e,this.gameEvebt[t][e])},t.prototype.removeGameEvbt=function(t){if(null!=this.gameEvebt[t])for(var e in this.gameEvebt[t])api.GlobalAPI.webSocket.off(e,this.gameEvebt[t][e])},t.prototype.allRemoveEvbt=function(){for(var t in this.gameEvebt)for(var e in this.gameEvebt[t])api.GlobalAPI.webSocket.off(e,this.gameEvebt[t][e])},t.prototype.dispose=function(){this.allRemoveEvbt(),this.eventRemove(),this.regedEvebt=null,this.gameEvebt=null},t.prototype.changeName=function(t){for(var e="",i=t.length,o=0;i>o;o++)e+=o==Math.floor(i/2-1)||o==Math.floor(i/2)||o==Math.floor(i/2+1)?"*":t.charAt(o);return e},t.prototype.contineGame=function(t){switch(t.which){case 1:api.GlobalAPI.moduleManager.openModule("redProject"),gameTool.stage.setContentSize(1920,1080),gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE;break;case 4:gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE,gameTool.stage.setContentSize(1920,1080),api.GlobalAPI.moduleManager.openModule("sweepGame");break;case 5:api.GlobalAPI.moduleManager.openModule("gzHero");break;case 6:api.GlobalAPI.moduleManager.openModule("feidao")}},t.prototype.playAllMc=function(t,e){void 0===e&&(e=null);for(var i=!1,o=0;o<t.numChildren;o++){var n=t.getChildAt(o);n instanceof fairygui.GComponent&&n.getTransition("t0")&&(i||null==e?n.getTransition("t0").play():(i=!0,n.getTransition("t0").play(function(){e.apply()},this)))}},t.prototype.playMc=function(t,e){void 0===e&&(e=null),t.getTransition("t0")&&(null!=e?t.getTransition("t0").play(function(){e.apply()},this):t.getTransition("t0").play())},t.prototype.comebackDoor=function(){isPc()?gui.addScene(PcDoorView):gui.addScene(DoorView)},t}();__reflect(PublicAPi.prototype,"PublicAPi");var SoundManagers=function(){function t(t){this.volume=.2,this.effvolume=.2,this._lastMusic="resource/sounds/bgmusic.mp3",this._soundFlag=!1,this._musicFlag=!1,this.isInPlay=!1,this.allChannel=[],this.isComplete=[!1,!1],t.addEventListener(egret.Event.DEACTIVATE,this.onBlur,this),t.addEventListener(egret.Event.ACTIVATE,this.onFocus,this)}return t.prototype.changeSound=function(t){this._soundFlag!=t&&(this._soundFlag=t)},t.prototype.playEffect=function(t,e){this._soundFlag&&RES.getResAsync(t,function(){var i=RES.getRes(t);i.type=egret.Sound.EFFECT;var o=i.play(0,1);o.volume=e?e:this.effvolume},this)},t.prototype.playEffectBuYrl=function(t,e,i){var o=this;if(this._soundFlag){var n=new egret.Sound;return n.load(t),n.addEventListener(egret.Event.COMPLETE,function(){var t=n.play(0,e?e:0);t.volume=i?i:o.effvolume,n.channel=t},this),n}},t.prototype.changeMusic=function(t,e){this._musicFlag!=t&&(this._musicFlag=t,this._musicFlag?this.isInPlay?this.playRedBGM(!0,e):this.playBGM(e):this.pauseBGM())},t.prototype.playRedBGM=function(t,e){void 0===t&&(t=!1),this.playBGM(e),this.isInPlay=!0},t.prototype.playBGM=function(t,e){var i=this;if(void 0===e&&(e=!1),e||(this.preBGM=this._lastMusic),this._lastMusic=t,this._musicFlag){if(this.isPause&&this.pauseMusic==t)return void this.resumeBGM();this.disposeSound(),RES.getResByUrl(this._lastMusic,function(t){i._sound=t,i._sound.type=egret.Sound.MUSIC,i._soundChannel&&i._soundChannel.stop(),i._soundChannel=i._sound.play(0,-1),i._soundChannel.volume=.2*i.volume},this,"sound")}},t.prototype.pauseBGM=function(){this._soundChannel&&!this._soundChannel.isStopped&&(this._soundChannel.volume=0,this.pauseMusic=this._lastMusic,this.isPause=!0)},t.prototype.resumeBGM=function(){this._musicFlag&&this._soundChannel&&!this._soundChannel.isStopped&&(this._soundChannel.volume=.2*this.volume,this.isPause=!1)},t.prototype.onBlur=function(){this.pauseBGM()},t.prototype.onFocus=function(){this.resumeBGM()},t.prototype.playPreBGM=function(){this.playBGM(this.preBGM),this.isInPlay=!1},t.prototype.resetBGM=function(){this.playBGM(this._lastMusic),this.isInPlay=!1},t.prototype.soundLoaded=function(){this._musicFlag&&(this._sound=RES.getRes(this._lastMusic),this._sound.type=egret.Sound.MUSIC,this._soundChannel=this._sound.play(0,-1),this._soundChannel.volume=this.volume)},t.prototype.disposeSound=function(){this._soundChannel&&(this._soundChannel.stop(),this._soundChannel=null),this._sound&&this._sound.removeEventListener(egret.Event.COMPLETE,this.soundLoaded,this)},t.prototype.soundInit=function(){var t=this;if(null==this.allSound){this.allSound=[];for(var e=["resource/sounds/shootApp_1.mp3","resource/sounds/shootApp_2.mp3","resource/sounds/shootApp_3.mp3","resource/sounds/shootBla_1.mp3","resource/sounds/shootBla_2.mp3","resource/sounds/shootBla_3.mp3","resource/sounds/shoot_1.mp3","resource/sounds/shoot_2.mp3","resource/sounds/shoot_3.mp3","resource/sounds/shoot_4.mp3","resource/sounds/ps_1.mp3","resource/sounds/ps_2.wav","resource/sounds/ps_3.mp3","resource/sounds/ps_4.mp3"],i=0;i<e.length;i++)this.isComplete[i]=!1,this.allSound.push(new egret.Sound),this.allSound[i].load(e[i]),this.allSound[i].addEventListener(egret.Event.COMPLETE,function(o){t.isComplete[t.allSound.indexOf(o.currentTarget)]=!0,t.allReadly()&&i>=e.length&&notification.postNotification("ready")},this)}},t.prototype.cleanChannel=function(t){this.allChannel[t]&&(this.allChannel[t].stop(),this.allChannel[t]=null)},t.prototype.createChannel=function(t,e,i,o){void 0===i&&(i=0),void 0===o&&(o=1),this.isComplete[t]&&(this.cleanChannel(t),api.GlobalAPI.soundManager._soundFlag&&(this.allChannel[t]=this.allSound[t].play(i,o),this.allChannel[t].volume=e,this.allSound[t].channel=this.allChannel[t]))},t.prototype.disposeAllSound=function(){if(null!=this.allSound){for(var t=0;t<this.allSound.length;t++)this.allChannel[t]&&(this.allChannel[t].stop(),this.allChannel[t]=null),this.allSound[t]&&(this.allSound[t]=null),this.isComplete[t]=!1;this.allSound=null}},t.prototype.allReadly=function(){for(var t=0;t<this.isComplete.length;t++)if(!this.isComplete[t])return!1;return!0},t}();__reflect(SoundManagers.prototype,"SoundManagers");var base;!function(t){var e=function(t){function e(){return t.call(this,"fishGame")||this}return __extends(e,t),e}(LoadViewBase);t.FishLoadUi=e,__reflect(e.prototype,"base.FishLoadUi");var i=function(t){function e(){return t.call(this,"xq")||this}return __extends(e,t),e}(LoadViewBase);t.Xq=i,__reflect(i.prototype,"base.Xq")}(base||(base={}));var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var BaseConfig=function(){function t(t,e){this._$clazz=t,this._$id=e,this.dic=[]}return Object.defineProperty(t.prototype,"dataSource",{set:function(t){this._$name=this._$clazz.toString(),this.analyseTxt(t)},enumerable:!0,configurable:!0}),t.prototype.analyseTxt=function(t){t||console.error("数据读取失败",this._$name);var e=t.split(/\r?\n/),i={},o=!1;e[1].split("	").forEach(function(t,e){t.length<=0||"#"==t.charAt(0)||(this._$id==t&&(o=!0),i[t]=e)},this),e.splice(0,2);for(var n={},s=0;s<e.length;s++){var a=new this._$clazz;a=this.mapData(i,e[s].split("	"),a),n[a[this._$id]]=a}this.dic=n},t.prototype.mapData=function(t,e,i){for(var o in t){var n=e[t[o]];if(-1!=o.search("List$")){var s=[];if(n.length>0){n=n.split(";");for(var a=0;a<n.length;a++){var r=n[a];this.isNum(r)&&(r=Number(r)),s.push(r)}}n=s}else this.isNum(n)?n=Number(n):"False"==n||"false"==n?n=!1:("True"==n||"true"==n)&&(n=!0);i[o]=n}return i},t.prototype.isNum=function(t){if("number"==typeof t)return!0;if("string"!=typeof t)return!1;if(null!=t){var e=void 0,i=void 0;return i=/-?\d*\.?\d*/i,e=t.match(i),e==t?!0:!1}return!1},t.prototype.getTypeData=function(t){return this.dic[t]},t}();__reflect(BaseConfig.prototype,"BaseConfig");var base;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isCache=!0,e.isApplying=!1,e}return __extends(e,t),e.prototype.enter=function(t){for(var e=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this._moduleInfo=t,loadUtil.loadConfigItems(mathTool.pluck(this.getConfigs(),"path"),function(){t.coreClass.data=new t.dataClass,e.open.apply(e,i),e.initData.apply(e,i)},this,mathTool.pluck(this.getConfigs(),"parse"),this)},e.prototype.initData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.isApplying=!0},e.prototype.close=function(){this.isApplying=!1,this._moduleInfo.coreClass.data.dispose(),this._moduleInfo.coreClass.dispose(),this._groups=null},e.prototype.getConfigs=function(){return[]},e.prototype.loadGroup=function(t,e,i,o){void 0===e&&(e=0);for(var n=[],s=4;s<arguments.length;s++)n[s-4]=arguments[s];loadUtil.loadGroup.apply(loadUtil,[t,null,i,o].concat(n)),mathTool.addValueByArray(t,this._groups)},e.prototype.destroyCache=function(){},Object.defineProperty(e.prototype,"moduleName",{get:function(){return this._moduleName},set:function(t){this._moduleName=t,this._packageName="module_"+this._moduleName,this._groups=[t]},enumerable:!0,configurable:!0}),e}(egret.EventDispatcher);t.BaseModule=e,__reflect(e.prototype,"base.BaseModule")}(base||(base={}));var base;!function(t){var e=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._distance=new egret.Point,o}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.initView=function(){t.prototype.initView.call(this),this.bar=[],this.btn=[];for(var e=0;6>e;e++)this.btn.push(this.getButton("btn"+e)),2>e&&(this.bar.push(this._ui.getChild("myPress"+e)),this.bar[e].max=100);this.btnShow(0,api.GlobalAPI.soundManager.volume),this.btnShow(1,api.GlobalAPI.soundManager.effvolume),this.c1=this._ui.getController("c1"),this.c2=this._ui.getController("c2"),api.GlobalAPI.soundManager._musicFlag?this.c1.setSelectedIndex(0):(this.c1.setSelectedIndex(1),this.btnShow(0,0)),api.GlobalAPI.soundManager._soundFlag?this.c2.setSelectedIndex(0):(this.c2.setSelectedIndex(1),this.btnShow(1,0))},e.prototype.btnShow=function(t,e){0==t?api.GlobalAPI.soundManager.volume=e:1==t&&(api.GlobalAPI.soundManager.effvolume=e),this.bar[t].value=100*e,this.btn[t+4].x=e*this.bar[t].width+this.bar[t].x-this._buttonList[4+t].width/2},e.prototype.initEvent=function(){this.btn[4].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.btn[4].addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this.btn[5].addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.btn[5].addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this)},e.prototype.mouseDown=function(t){this.curNum=this.btn.indexOf(t.currentTarget),this._touchStatus=!0,this.curNum>-1&&(this._distance.x=t.stageX-this.btn[this.curNum].x,this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this))},e.prototype.mouseMove=function(t){if(this._touchStatus){t.stageX<=this.bar[0].x?this.btn[this.curNum].x=this.bar[0].x-this.btn[this.curNum].width/2:t.stageX>=this.bar[0].x+this.bar[0].width-this.btn[this.curNum].width/2?this.btn[this.curNum].x=this.bar[0].x+this.bar[0].width-this.btn[this.curNum].width/2:this.btn[this.curNum].x=t.stageX-this.btn[this.curNum].width/2;var e=Math.floor(this.btn[this.curNum].x-this.bar[1].x+this.btn[this.curNum].width/2);e<=this.btn[this.curNum].width/2?e=0:e>=this.bar[0].width&&(e=this.bar[0].width),4==this.curNum?(api.GlobalAPI.soundManager.volume=e/this.bar[0].width,this.bar[0].value=100*api.GlobalAPI.soundManager.volume,api.GlobalAPI.soundManager.volume>0?this.c1.setSelectedIndex(0):this.c1.setSelectedIndex(1)):(api.GlobalAPI.soundManager.effvolume=e/this.bar[1].width,this.bar[1].value=100*api.GlobalAPI.soundManager.effvolume,api.GlobalAPI.soundManager.effvolume>0?this.c2.setSelectedIndex(0):this.c2.setSelectedIndex(1))}},e.prototype.mouseUp=function(t){this._touchStatus=!1,this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},e.prototype.onClick=function(t){switch(api.GlobalAPI.soundManager.playEffect("click_mp3",api.GlobalAPI.soundManager.effvolume),t.currentTarget.name){case"closeButton":this.dispose()}var e=this.btn.indexOf(t.currentTarget);e>-1&&4>e&&(0==e?this.c1.setSelectedIndex(0):1==e?(this.c2.setSelectedIndex(0),api.GlobalAPI.soundManager.changeSound(!0)):2==e?(this.c1.setSelectedIndex(1),this.btnShow(0,0)):3==e&&(this.c2.setSelectedIndex(1),this.btnShow(1,0)))},e}(gui.OvBase);t.BaseRuleView=e,__reflect(e.prototype,"base.BaseRuleView")}(base||(base={}));var base;!function(t){var e=function(){function t(){this.allChannel=[],this.isComplete=[!1,!1],this.soundUrl=[]}return t.prototype.soundInit=function(){var t=this;if(null==this.allSound){this.allSound=[];for(var e=0;e<this.soundUrl.length;e++){this.isComplete[e]=!1,this.allSound.push(new egret.Sound);var i=RES.getVirtualUrl(this.soundUrl[e]);this.allSound[e].load(i),this.allSound[e].addEventListener(egret.Event.COMPLETE,function(i){t.isComplete[t.allSound.indexOf(i.currentTarget)]=!0,t.allReadly()&&e>=t.allSound.length&&notification.postNotification("ready")},this)}}},t.prototype.cleanChannel=function(t){this.allChannel[t]&&(this.allChannel[t].stop(),this.allChannel[t]=null)},t.prototype.createChannel=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=1),this.isComplete[t]&&(this.cleanChannel(t),api.GlobalAPI.soundManager._soundFlag&&(this.allChannel[t]=this.allSound[t].play(i,o),this.allChannel[t].volume=api.GlobalAPI.soundManager.effvolume,this.allSound[t].channel=this.allChannel[t]))},t.prototype.disposeAllSound=function(){if(null!=this.allSound){for(var t=0;t<this.allSound.length;t++)this.allChannel[t]&&(this.allChannel[t].stop(),this.allChannel[t]=null),this.allSound[t]&&(this.allSound[t]=null),this.isComplete[t]=!1;this.allSound=null}},t.prototype.allReadly=function(){for(var t=0;t<this.isComplete.length;t++)if(!this.isComplete[t])return!1;return!0},t}();t.SoundManager=e,__reflect(e.prototype,"base.SoundManager")}(base||(base={}));var base;!function(t){function e(t){new l(t)}var i=function(t){function e(e,i){var o=t.call(this)||this;return o._skinName=e,o._message=i,o.initView(),o.touchable=!1,gui.addGComponentToStage(o,define.WindowType.TIP_LAYER),o.start(),o}return __extends(e,t),e.prototype.dispose=function(){this._animation=null,this._ui.dispose(),this._ui=null,this._content=null,this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),t.prototype.dispose.call(this)},e.prototype.start=function(){this._animation?this._animation.start(this.dispose,this):this.dispose()},e.prototype.initView=function(){this._ui=fairygui.UIPackage.createObject("common","tip").asCom,this.addChild(this._ui),this._content=this._ui.getChild("content").asTextField,this._content.text=this._message},Object.defineProperty(e.prototype,"animationType",{get:function(){return this._animationType},set:function(t){this._animationType!=t&&(this._animation&&this._animation.dispose(),this._animationType=t,this._animation=gameTool.singleton(n).getAnimationClass(t),this._animation.component=this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this._ui.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this._ui.width},enumerable:!0,configurable:!0}),e}(fairygui.GComponent);t.BaseTip=i,__reflect(i.prototype,"base.BaseTip");var o=function(){function t(){}return t.prototype.start=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.component.addEventListener(egret.Event.CLOSE,this.onGameTipClose,this);var s=gameTool.singleton(n).getInfo(this.component.animationType);s.itemList.push(this.component)},t.prototype.dispose=function(){this.component.removeEventListener(egret.Event.CLOSE,this.onGameTipClose,this),this.component=null},t.prototype.onGameTipClose=function(t){var e=t.currentTarget,i=gameTool.singleton(n).getInfo(this.component.animationType),o=i.itemList.indexOf(e);e.removeEventListener(egret.Event.CLOSE,this.onGameTipClose,this),o>=0&&i.itemList.splice(o,1),0==i.itemList.length&&this.resetInfo(i)},t.prototype.resetInfo=function(t){t.textTipCurrentY=t.startY},t}();t.TipAnimationBase=o,__reflect(o.prototype,"base.TipAnimationBase");var n=function(){function e(){this._infos={},this._infos[t.ANIMATION1]=new s(a,gameTool.stage.stageHeight/4),this._infos[t.ANIMATION2]=new s(r,gameTool.stage.stageHeight/4)}return e.prototype.getInfo=function(t){return this._infos[t]},e.prototype.getAnimationClass=function(t){return new this._infos[t].animationClass},e}();t.TipManagers=n,__reflect(n.prototype,"base.TipManagers");var s=function(){function t(t,e){this.animationClass=t,this.startY=e,this.textTipCurrentY=e,this.itemList=[]}return t}();t.ManagerInfo=s,__reflect(s.prototype,"base.ManagerInfo");var a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.start=function(e,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];t.prototype.start.apply(this,[e,i].concat(o));var a=gameTool.singleton(n).getInfo(this.component.animationType);this.component.alpha=0,this.component.x=gameTool.stage.stageWidth/2-200,this.component.y=a.textTipCurrentY,egret.Tween.get(this.component).to({y:a.textTipCurrentY-50,alpha:1},200).wait(2e3).to({alpha:0,y:a.textTipCurrentY-100},200).call(e,i,o),a.textTipCurrentY>gameTool.stage.stageHeight+300?this.resetInfo(a):a.textTipCurrentY+=this.component.realHeight+5},e}(o);t.NormalTipAnimation=a,__reflect(a.prototype,"base.NormalTipAnimation");var r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.start=function(e,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];t.prototype.start.apply(this,[e,i].concat(o));var a=gameTool.singleton(n).getInfo(this.component.animationType);this.component.alpha=1,this.component.x=gameTool.stage.stageWidth/2,this.component.y=a.textTipCurrentY,a.textTipCurrentY+=this.component.realHeight+5,egret.Tween.get(this.component).wait(1e3).to({y:this.component.y-300,alpha:0},1e3).call(e,i,o)},e}(o);t.SystemTipAnimation=r,__reflect(r.prototype,"base.SystemTipAnimation"),t.showTextTips=e;var l=function(e){function i(t){return e.call(this,"normalTipSkin",t)||this}return __extends(i,e),i.prototype.initView=function(){e.prototype.initView.call(this),this.animationType=t.ANIMATION1},i}(i);t.TipItems=l,__reflect(l.prototype,"base.TipItems"),t.ANIMATION1=1,t.ANIMATION2=2}(base||(base={}));var ModuleManager=function(){function t(){this._modules=[],this._moduleInfo=[]}return t.prototype.openModule=function(t,e,i){void 0===e&&(e=1);for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n]},t.prototype.applyModule=function(e,i){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];var s=this.getModule(e.moduleName);s?s.open.apply(s,o):(s=new e.mainClass,e.coreClass.main=s,s.moduleName=e.moduleName,this._modules[e.moduleName]=s,s.enter.apply(s,[e].concat(o)),s.addEventListener(t.MODULE_CLOSED,this.onModuleClosed,this)),i&&i.apply()},t.prototype.onModuleClosed=function(t){var e=t.target.moduleName;this._modules[e]=null,delete this._modules[e]},t.prototype.getModuleInfo=function(t){return this._moduleInfo[t]},t.prototype.getModule=function(t){return this._modules[t]},t.MODULE_CLOSED="moduleClosed",t.MODULE_OPENED="moduleOpened",t}();__reflect(ModuleManager.prototype,"ModuleManager");var ModuleInfo=function(){function t(){}return t}();__reflect(ModuleInfo.prototype,"ModuleInfo");var timeUtils;!function(t){var e=function(){function t(){this.TimeMin=60,this.TimeHour=60*this.TimeMin,this.TimeDay=24*this.TimeHour,this.TimeWeek=7*this.TimeDay,this.timerList={},this.$timestamp=0,this.severTime=0,this.disServerTime=0
}return t.prototype.initRefreshTime=function(){var t=this;this.addTimerFunc(1e3,function(){t.timestamp0()},this)},t.prototype.addTimerFunc=function(t,e,i){var o=this,n=this.timerList[t];if(n){for(var s=n.list,a=s.length,r=0;a>r;++r){var l=s[r];if(l.func==e&&l.thisObj==i)return}s.push({func:e,thisObj:i}),1==s.length&&n.timer.start()}else{var h=new egret.Timer(t),c=function(){for(var e=o.timerList[t].list,i=e.length,n=0;i>n;++n){var s=e[n];s.func&&s.thisObj&&(s.func.call(s.thisObj),e.length!=i&&(i=e.length,--n))}};n={timer:h,func:c,list:[{func:e,thisObj:i}]},this.timerList[t]=n,h.addEventListener(egret.TimerEvent.TIMER,c,this),h.start()}},t.prototype.removeTimerFunc=function(t,e,i){var o=this.timerList[t];if(o){for(var n=this.timerList[t].list,s=n.length,a=0;s>a;++a){var r=n[a];r.func==e&&r.thisObj==i&&(n.splice(a,1),s=n.length,--a)}n.length<1&&o.timer.stop()}},t.prototype.toFriendly=function(t){var e=this.getInterval(t);return e>this.TimeWeek?(e/this.TimeWeek).toFixed()+"周前":e>this.TimeDay?(e/this.TimeDay).toFixed()+"天前":e>this.TimeHour?(e/this.TimeHour).toFixed()+"小时前":e>this.TimeMin?(e/this.TimeMin).toFixed()+"分钟前":"刚刚"},t.prototype.toTimeHour=function(t,e){void 0===e&&(e=!0);var i=t;e&&(i=t-this.timestamp());var o="";return i>this.TimeHour&&(o+=Math.floor(i/this.TimeHour)+":",i-=Math.floor(i/this.TimeHour)*this.TimeHour),(i>this.TimeMin||i)&&(o+=("00"+Math.floor(i/this.TimeMin)).slice(-2)+":",i-=Math.floor(i/this.TimeMin)*this.TimeMin),o+=("00"+i).slice(-2)},t.prototype.toTimeHour2=function(t){var e=t,i="";return e>this.TimeHour&&(i+=Math.floor(e/this.TimeHour)+":",e-=Math.floor(e/this.TimeHour)*this.TimeHour),i+=("00"+Math.floor(e/this.TimeMin)).slice(-2),e-=Math.floor(e/this.TimeMin)*this.TimeMin,e>0&&(i+=":"+("00"+e).slice(-2)),i},t.prototype.toTimeHour3=function(t){var e=t,i="";if(e>this.TimeHour){var o=Math.floor(e/this.TimeHour);Math.floor(o/24)>0&&(i=Math.floor(o/24)+"天 ",e-=Math.floor(o/24)*this.TimeDay),i+=Math.floor(e/this.TimeHour)+":",e-=Math.floor(e/this.TimeHour)*this.TimeHour}return i+=("00"+Math.floor(e/this.TimeMin)).slice(-2),e-=Math.floor(e/this.TimeMin)*this.TimeMin,i+=":"+("00"+e).slice(-2)},t.prototype.toSeconds=function(t){var e=t.indexOf(":"),i=Number(t.substring(0,e)),o=Number(t.substring(e+1,t.length)),n=i*this.TimeHour+o*this.TimeMin;return n},t.prototype.timeToSeconds=function(){var t=new Date(1e3*this.timestamp()),e=t.getHours()*this.TimeHour+t.getMinutes()*this.TimeMin+t.getSeconds();return e},t.prototype.format=function(t){var e=new Date(t),i=e.getFullYear(),o=e.getMonth()+1,n=e.getDate();return i+"年"+o+"月"+n+"日"},t.prototype.toDayTime=function(t){var e="",i=Math.floor(t/this.TimeDay);t-=i*this.TimeDay,i>0&&(e=e+i+"天");var o=Math.floor(t/this.TimeHour);t-=o*this.TimeHour,e=o>0?e+o+"小时":e;var n=Math.floor(t/this.TimeMin),s=t-n*this.TimeMin;return e=n>0?e+n+"分":e,e=s>0?e+s+"秒":e},t.prototype.timestamp=function(){return this.$timestamp},t.prototype.timestamp0=function(){return this.$timestamp=Math.floor((new Date).getTime()/1e3+this.disServerTime),this.$timestamp},t.prototype.getInterval=function(t){return this.timestamp()-t},t.prototype.getSurplusTime=function(){var t=this.timestamp(),e=new Date(1e3*t),i=this.TimeDay-((e.getHours()+1)*this.TimeHour+e.getMinutes()*this.TimeMin+e.getSeconds());return i},t.prototype.timeToformat=function(t){var e;e=t?new Date(t):new Date(this.timestamp());var i=e.getFullYear(),o=("00"+Math.floor(e.getMonth()+1)).slice(-2),n=("00"+Math.floor(e.getDate())).slice(-2),s=("00"+Math.floor(e.getHours())).slice(-2),a=("00"+Math.floor(e.getMinutes())).slice(-2);return i+"-"+o+"-"+n+" "+s+":"+a},t.prototype.timeToformat2=function(t){var e;e=t?new Date(t):new Date(this.timestamp());var i=e.getMonth()+1;i=("00"+i).slice(-2);var o=("00"+Math.floor(e.getDate())).slice(-2),n=("00"+Math.floor(e.getHours())).slice(-2),s=("00"+Math.floor(e.getMinutes())).slice(-2),a=("00"+Math.floor(e.getSeconds())).slice(-2);return i+"-"+o+"\n"+n+":"+s+":"+a},t.prototype.timeToformat3=function(t){var e;e=t?new Date(t):new Date(this.timestamp());var i=e.getFullYear(),o=("00"+Math.floor(e.getMonth()+1)).slice(-2),n=("00"+Math.floor(e.getDate())).slice(-2);return i+"-"+o+"-"+n},t.prototype.initTime=function(t){t=t||0,this.severTime=t,this.disServerTime=t-Math.floor((new Date).getTime()/1e3)},t.prototype.isToday=function(t){return new Date(1e3*t).toDateString()===new Date(1e3*this.timestamp()).toDateString()?!0:!1},t}();t.TimeUtils=e,__reflect(e.prototype,"timeUtils.TimeUtils"),t.time=new e}(timeUtils||(timeUtils={}));var btnItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this),this._txt=[],this.kong=this.getChild("kong").asCom,this._txt.push(this.getChild("txt0").asTextField),this._txt.push(this.getChild("txt1").asTextField),this.tipShow=this.getChild("tipShow").asCom,this.mc=this.getChild("mc").asCom,this.imag=new fairygui.GImage},e.prototype.myId=function(t){this._myId=t,RES.getResByUrl("resource/assets/icon/"+(t+100).toString()+".png",this.imgLoadHandler,this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.getMyId=function(){return this._myId+1},e.prototype.setTipShow=function(t){this.tipShow.getController("c1").setSelectedIndex(t)},e.prototype.setMcShow=function(t){this.mc.getController("c1").setSelectedIndex(t)},e.prototype.myName=function(t){this._txt[0].text=t.toString()},e.prototype.pNum=function(t){""==t?this._txt[1].text="":this._txt[1].text=t+"人在玩"},e.prototype.wx=function(t){this._txt[1].text=t.toString()},e.prototype.imgLoadHandler=function(t,e){this.imag.texture=t,this.kong.addChild(this.imag)},e}(fairygui.GButton);__reflect(btnItem.prototype,"btnItem");var DoorView=function(t){function e(){var e=t.call(this,"hallDoor","mainView")||this;return e.mathRadomBg=0,e.showNum=18,e.myId=[0,1,3,2,6,4,5,99],e.nameArr=["幸运福袋","欢乐钓鱼","大圣偷桃","扫雷","暗棋争霸","飞刀挑战","闯三关","敬请期待"],e.mcArr=[0,1,3,2,4,1,1,4],e.tipsArr=[0,0,0,0,2,0,0,0],e._type=0,e._num=0,e._dataFlag=!1,e}return __extends(e,t),e.prototype.dispose=function(){this.remove(),t.prototype.dispose.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.item=[],this._textList=[];for(var i=0;4>i;i++)2>i&&this._textList.push(this.getTextField("txt"+i));for(var o=0;o<this.showNum;o++)this.item.push(new IconSprite(this._ui.getChild("item"+o).asCom)),this.item[o].addEventListener(IconSprite.ONCLICK,this.itemClick,this),this.item[o].myId=o+1;this.btn100=this._ui.getChild("btn100").asButton,api.GlobalAPI.publicApi.isRelease&&(this.btn100.visible=!1),this.down=this._ui.getChild("down").asCom,this.createIcon(),this.c1=this._ui.getController("c1"),this.mathRadomBg=Math.floor(2*Math.random())+1,this.itemlist=this.getList("list"),this.itemlist.itemRenderer=this.iteRenderer,this.itemlist.callbackThisObj=this,this.itemlist.scrollPane.addEventListener(fairygui.ScrollPane.SCROLL,this.onChange,this),this.itemlist.addEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this),api.GlobalAPI.soundManager.changeMusic(!1,""),api.GlobalAPI.webSocket.request(GameEvent.GetRenshu,{},this.getRenshu.bind(this)),api.GlobalAPI.webSocket.request(GameEvent.GetAaminiAccountInfo,{},this.useDataUpdate.bind(this))},e.prototype.onChange=function(t){this.itemlist.scrollPane.posY+this.itemlist.height>=this.itemlist.scrollPane.contentHeight?this.down.visible=!1:this.down.visible=!0},e.prototype.getListItemResource=function(t){return fairygui.UIPackage.getItemURL("hallDoor","publicBtn")},e.prototype.iteRenderer=function(t,e){e.myId(this.myId[t]),e.myName(this.nameArr[t]),e.setMcShow(this.mcArr[t]),e.setTipShow(this.tipsArr[t]),""==this.pNum[t]?(e.enabled=!1,e.wx("正在维护中...")):"a"==this.pNum[t]?e.wx("敬请期待.."):(e.enabled=!0,e.pNum(this.pNum[t]))},e.prototype.getRenshu=function(t){this.pNum=[];for(var e=[0,0],i=0;i<this.nameArr.length;i++){var o="",n=String(t[this.nameArr[i]]);if(e[0]<t[this.nameArr[i]]&&(e[0]=t[this.nameArr[i]],e[1]=i),"undefined"==n)o="-1";else for(var s=0;s<n.length;s++)o+=n.charAt(s),(n.length-s)%3==1&&s!=n.length-1&&(o+=",");0==Number(o)?this.pNum.push(""):-1==Number(o)?this.pNum.push("a"):this.pNum.push(o)}this.changeNum(e[1]),this.itemlist.numItems=this.nameArr.length},e.prototype.changeNum=function(t){var e=this.myId[0];this.myId[0]=this.myId[t],this.myId[t]=e;var i=this.nameArr[0];this.nameArr[0]=this.nameArr[t],this.nameArr[t]=i,e=this.mcArr[0],this.mcArr[0]=this.mcArr[t],this.mcArr[t]=e,i=this.pNum[0],this.pNum[0]=this.pNum[t],this.pNum[t]=i,this.tipsArr[0]=1},e.prototype.onItemClick=function(t){var e=this,i=t.itemObject;switch(i.getMyId()){case 1:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:1},function(t){0==t.errorCode?(gameTool.stage.setContentSize(1920,1080),gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE,api.GlobalAPI.moduleManager.openModule("redProject"),e.dispose()):api.createAlert("游戏维护中")});break;case 2:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:2},function(t){0==t.errorCode?(gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE,gameTool.stage.setContentSize(1920,1080),api.GlobalAPI.moduleManager.openModule("fishGame"),e.dispose()):api.createAlert("游戏维护中")});break;case 3:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:4},function(t){0==t.errorCode?(gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE,gameTool.stage.setContentSize(1920,1080),api.GlobalAPI.moduleManager.openModule("sweepGame"),e.dispose()):api.createAlert("游戏维护中")});break;case 4:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:5},function(t){0==t.errorCode?(api.GlobalAPI.moduleManager.openModule("gzHero"),e.dispose()):api.createAlert("游戏维护中")});break;case 5:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:6},function(t){0==t.errorCode?(api.GlobalAPI.moduleManager.openModule("feidao"),e.dispose()):api.createAlert("游戏维护中")});break;case 6:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:7},function(t){0==t.errorCode?(api.GlobalAPI.moduleManager.openModule("rouge"),e.dispose()):api.createAlert("游戏维护中")});break;case 7:api.GlobalAPI.moduleManager.openModule("xq"),this.dispose()}},e.prototype.createIcon=function(){this.headIcon=new headIcon(this._ui.getChild("iconKong")),this._ui.getChild("btn98").asButton.addChild(this.headIcon)},e.prototype.itemClick=function(t){this.cleanChooseByItem();var e=t.currentTarget;e.choose(!0),this.headIcon.myId!=e.myId&&(this.headIcon.myId=e.myId,api.GlobalAPI.webSocket.request(GameEvent.ChooseIcon,{icon:e.myId}))},e.prototype.cleanChooseByItem=function(){for(var t=0;t<this.showNum;t++)this.item[t].choose(!1)},e.prototype.onRollOver=function(t){var e=this._buttonList.indexOf(t.currentTarget);e>-1&&this._buttonList[e].setScale(1.1,1.1)},e.prototype.onRollOut=function(t){var e=this._buttonList.indexOf(t.currentTarget);e>-1&&this._buttonList[e].setScale(1,1)},e.prototype.cleanButton=function(){for(var t=0;t<this._buttonList.length;t++)this._buttonList[t].setScale(1,1)},e.prototype.initEvent=function(){this.regedEvebt={},this.eventInit()},e.prototype.kickoutF=function(){var t=this;api.createAlert("账户在别处登陆，请重新连接",1,function(e){t.dispose(),gui.addScene(LoginView)})},e.prototype.eventInit=function(){if(null!=this.regedEvebt)for(var t in this.regedEvebt)api.GlobalAPI.webSocket.on(t,this.regedEvebt[t])},e.prototype.eventRemove=function(){if(null!=this.regedEvebt)for(var t in this.regedEvebt)api.GlobalAPI.webSocket.off(t,this.regedEvebt[t])},e.prototype.onClick=function(e){t.prototype.onClick.call(this,e),api.GlobalAPI.soundManager.playEffectBuYrl("resource/assets/common/click.mp3",1);var i=this._buttonList.indexOf(e.currentTarget);i>-1&&this._buttonList[i].setScale(1,1)},e.prototype.useDataUpdate=function(t){var e=this;0==t.errorCode?t.a&&(t.a.username&&api.GlobalAPI.userData.setUserName(t.a.username),t.a.coins?api.GlobalAPI.userData.setUserCoins(t.a.coins):api.GlobalAPI.userData.setUserCoins(0),this.iconShow(t.a.icon)):1==t.errorCode?api.createAlert("用户不存在,返回登录界面",1,function(t){1==t&&(e.dispose(),gui.addScene(LoginView))}):2==t.errorCode&&api.createAlert("其他错误返回登录界面",1,function(t){1==t&&(e.dispose(),gui.addScene(LoginView))}),this.update()},e.prototype.iconShow=function(t){0==t&&(t=1),this.cleanChooseByItem(),this.item[t-1].choose(!0),this.headIcon.myId=t,api.GlobalAPI.userData.setUserIcon(this.headIcon.myId)},e.prototype.update=function(){this.setText(0,api.GlobalAPI.userData.getUserName()),this.setText(1,api.GlobalAPI.userData.getUserCoins())},e.prototype.clickHandler=function(e){switch(t.prototype.clickHandler.call(this,e),e){case 100:api.GlobalAPI.webSocket.request(GameEvent.AddCoins,{},this.addCoinsBack.bind(this));break;case 99:this.c1.setSelectedIndex(0);break;case 98:this.c1.setSelectedIndex(1)}},e.prototype.inRoom=function(){this.dispose(),setTimeout(function(){var t="47.52.32.227",e=9994;api.GlobalAPI.webSocket.connectServer(t+":"+e,function(){gui.addScene(LoginView)})},500)},e.prototype.addCoinsBack=function(t){t.a&&(this.setText(1,t.a.coins),api.GlobalAPI.userData.setUserCoins(t.a.coins))},e.prototype.clickInRoom=function(t){},e.prototype.inRoomBack=function(t){},e.prototype.remove=function(){this._dataFlag=!1},e}(gui.OvBase);__reflect(DoorView.prototype,"DoorView");var headIcon=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this)||this;return o.mask=e.displayObject,o.width=e.width,o.height=e.height,o._myid=-1,i&&(o.x=e.x,o.y=e.y),o}return __extends(e,t),Object.defineProperty(e.prototype,"myId",{get:function(){return this._myid},set:function(t){0==t&&(t=1),(t!=this._myid||null==this.imag)&&(this.imag&&(this.imag.parent&&this.imag.parent.removeChild(this.imag),this.imag=null),this.imag=this.imag=new fairygui.GImage,this.addChild(this.imag),this._myid=t,RES.getResByUrl("resource/assets/icon/"+t.toString()+".jpg",this.imgLoadHandler,this,RES.ResourceItem.TYPE_IMAGE))},enumerable:!0,configurable:!0}),e.prototype.imgLoadHandler=function(t,e){this.imag.texture=t,this.imag.width=this.width+10,this.imag.height=this.height+10,this.imag.x=-5,this.imag.y=-5},e.prototype.clean=function(){this.imag&&(this.imag.parent&&this.imag.parent.removeChild(this.imag),this.imag=null)},e}(fairygui.GComponent);__reflect(headIcon.prototype,"headIcon");var IconItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this),this.c1=this.getController("c1"),this._icon=this.getChild("icon"),this._myid=-1,this.imag=new egret.Bitmap},Object.defineProperty(e.prototype,"myId",{get:function(){return this._myid},set:function(t){t!=this._myid&&(this._myid=t,RES.getResByUrl("resource/assets/icon/"+t.toString()+".jpg",this.imgLoadHandler,this,RES.ResourceItem.TYPE_IMAGE))},enumerable:!0,configurable:!0}),e.prototype.imgLoadHandler=function(t,e){this.imag.texture=t,this.displayObject.addChild(this.imag),this.imag.width=this.width+10,this.imag.height=this.height+10,this.imag.x=-5,this.imag.y=-5,this.imag.mask=this._icon.displayObject},e.prototype.choose=function(t){t?this.c1.setSelectedIndex(1):this.c1.setSelectedIndex(0)},e}(fairygui.GComponent);__reflect(IconItem.prototype,"IconItem");var IconSprite=function(t){function e(e){var i=t.call(this)||this;return i.mainView=e,i.c1=i.mainView.getController("c1"),i._icon=i.mainView.getChild("icon"),i._myid=-1,i.imag=new egret.Bitmap,i.mainView.addEventListener(egret.TouchEvent.TOUCH_TAP,i.itemClick,i),i}return __extends(e,t),e.prototype.itemClick=function(t){this.dispatchEvent(new egret.Event(e.ONCLICK))},Object.defineProperty(e.prototype,"myId",{get:function(){return this._myid},set:function(t){t!=this._myid&&(this._myid=t,RES.getResByUrl("resource/assets/icon/"+t.toString()+".jpg",this.imgLoadHandler,this,RES.ResourceItem.TYPE_IMAGE))},enumerable:!0,configurable:!0}),e.prototype.imgLoadHandler=function(t,e){this.imag.texture=t,this.mainView.displayObject.addChild(this.imag),this.imag.x=this._icon.x,this.imag.y=this._icon.y,this.imag.mask=this._icon.displayObject},e.prototype.choose=function(t){t?this.c1.setSelectedIndex(1):this.c1.setSelectedIndex(0)},e.ONCLICK="onClikc",e}(fairygui.GComponent);__reflect(IconSprite.prototype,"IconSprite");var IconView=function(){function t(t,e){this.mainView=t,this._myIcon=e,this.initView()}return t.prototype.initView=function(){this.itemlist=this.mainView.getChild("list").asList,this.itemlist.itemRenderer=this.iteRenderer,this.itemlist.callbackThisObj=this,this.itemlist.numItems=18,this.itemlist.addEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this),this.btn=[],this.btn.push(this.mainView.getChild("btn0").asButton),this.btn.push(this.mainView.getChild("btn1").asButton),this.btn[0].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.btn[1].addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this)},t.prototype.onClick=function(t){var e=this.btn.indexOf(t.currentTarget);if(e>-1)if(0==e)notification.postNotification(GameEvent.web_closeDoor);else{if(api.GlobalAPI.userData.getUserIcon()==this.chooseId)return;this._myIcon.myId=this.chooseId,api.GlobalAPI.webSocket.request(GameEvent.ChooseIcon,{icon:this.chooseId}),notification.postNotification(GameEvent.web_closeDoor)}},t.prototype.iteRenderer=function(t,e){e.myId=t+1},t.prototype.onItemClick=function(t){var e=t.itemObject;this.cleanChooseByItem(),e.choose(!0),this.chooseId=e.myId},t.prototype.cleanChooseByItem=function(){for(var t=0;18>t;t++){var e=this.itemlist.getChildAt(t);e.choose(!1)}},t}();__reflect(IconView.prototype,"IconView");var LoginView=function(t){function e(){return t.call(this,"common","loginView")||this}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.login=this._ui.getController("login"),this.login.setSelectedIndex(0);for(var i=0;5>i;i++)this._textList.push(this.getTextField("txt"+i))},e.prototype.clickHandler=function(e){switch(t.prototype.clickHandler.call(this,e),api.GlobalAPI.soundManager.playEffectBuYrl("resource/assets/common/click.mp3",1),e){case 1:this.gotoLogin();break;case 2:this.setText(3,""),this.setText(4,""),this.setText(2,""),this.login.setSelectedIndex(1);break;case 3:this.createUserName();break;case 4:case 5:this.setText(0,""),this.setText(1,""),this.login.setSelectedIndex(0)}},e.prototype.gotoLogin=function(){return""==this.getText(0)||""==this.getText(1)?void api.createAlert("账号或密码不能为空"):void api.GlobalAPI.webSocket.request(GameEvent.AaAccountVerify,{userName:this.getText(0),pwd:this.getText(1)},this.callbackByAaA.bind(this),function(t,e,i){console.error("无法连接游戏服务器.请确认网络连接无异常.[code:%s, msg:%s]",e,i)})},e.prototype.callbackByAaA=function(t){0==t.errorCode?(this.dispose(),api.GlobalAPI.userData.setOpenId(t.open_id),api.GlobalAPI.webSocket.login(t.open_id)):1==t.errorCode?api.createAlert("用户不存在"):2==t.errorCode?api.createAlert("/密码错误"):3==t.errorCode&&api.createAlert("其他错误登录失败")},e.prototype.createUserName=function(){api.GlobalAPI.webSocket.request(GameEvent.CreateAaminiAccount,{userName:this.getText(3),pwd:this.getText(4),email:this.getText(2)},this.userNameBack.bind(this),function(t,e,i){console.error("无法连接游戏服务器.请确认网络连接无异常.[code:%s, msg:%s]",e,i)})},e.prototype.userNameBack=function(t){0==t.errorCode?t.open_id&&(api.GlobalAPI.userData.setOpenId(t.open_id),this.setText(0,this.getText(3)),this.setText(1,this.getText(4)),this.gotoLogin()):1==t.errorCode?api.createAlert("用户已经存在"):2==t.errorCode?api.createAlert("用户名太长"):3==t.errorCode?api.createAlert("用户名太短"):4==t.errorCode?api.createAlert("密码太短太短"):5==t.errorCode?api.createAlert("密码太长"):6==t.errorCode?api.createAlert("账号密码只能是字母或数字"):7==t.errorCode&&api.createAlert("其他错误")},e}(gui.OvBase);__reflect(LoginView.prototype,"LoginView");var PcDoorView=function(t){function e(){var e=t.call(this,"pcDoor","mainView")||this;return e.showNum=18,e.myId=[0,1,3,2,6,4,5,99],e.nameArr=["幸运福袋","欢乐钓鱼","大圣偷桃","扫雷","暗棋争霸","飞刀挑战","闯三关","敬请期待"],e.mcArr=[0,1,3,2,4,1,1,4],e.tipsArr=[0,0,0,0,2,0,0,0],e}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._textList=[];for(var i=0;4>i;i++)2>i&&this._textList.push(this.getTextField("txt"+i));this.btn100=this._ui.getChild("btn100").asButton,api.GlobalAPI.publicApi.isRelease&&(this.btn100.visible=!1),this.createIcon(),this.c1=this._ui.getController("c1"),this.iconView=new IconView(this._ui.getChild("iconView").asCom,this.headIcon),api.GlobalAPI.soundManager.changeMusic(!1,""),api.GlobalAPI.webSocket.request(GameEvent.GetRenshu,{},this.getRenshu.bind(this)),api.GlobalAPI.webSocket.request(GameEvent.GetAaminiAccountInfo,{},this.useDataUpdate.bind(this)),notification.addNotification(GameEvent.web_closeDoor,this.closeIcon,this)},e.prototype.closeIcon=function(){this.c1.setSelectedIndex(0)},e.prototype.getRenshu=function(t){this.pNum=[];for(var e=0;e<this.nameArr.length;e++){var i="",o=String(t[this.nameArr[e]]);if("undefined"==o)i="-1";else for(var n=0;n<o.length;n++)i+=o.charAt(n),(o.length-n)%3==1&&n!=o.length-1&&(i+=",");"-1"!=i&&(this._ui.getChild("btn"+(e+1)).asButton.getChild("txt").text=i+"人在玩")}},e.prototype.createIcon=function(){this.headIcon=new headIcon(this._ui.getChild("iconKong")),this._ui.getChild("btn98").asButton.addChild(this.headIcon)},e.prototype.onRollOver=function(t){var e=this._buttonList.indexOf(t.currentTarget);e>-1&&this._buttonList[e].setScale(1.1,1.1)},e.prototype.onRollOut=function(t){var e=this._buttonList.indexOf(t.currentTarget);e>-1&&this._buttonList[e].setScale(1,1)},e.prototype.cleanButton=function(){for(var t=0;t<this._buttonList.length;t++)this._buttonList[t].setScale(1,1)},e.prototype.initEvent=function(){this.regedEvebt={},this.eventInit()},e.prototype.kickoutF=function(){var t=this;api.createAlert("账户在别处登陆，请重新连接",1,function(e){t.dispose(),gui.addScene(LoginView)})},e.prototype.eventInit=function(){if(null!=this.regedEvebt)for(var t in this.regedEvebt)api.GlobalAPI.webSocket.on(t,this.regedEvebt[t])},e.prototype.eventRemove=function(){if(null!=this.regedEvebt)for(var t in this.regedEvebt)api.GlobalAPI.webSocket.off(t,this.regedEvebt[t])},e.prototype.onClick=function(e){t.prototype.onClick.call(this,e),api.GlobalAPI.soundManager.playEffectBuYrl("resource/assets/common/click.mp3",1);var i=this._buttonList.indexOf(e.currentTarget);i>-1&&this._buttonList[i].setScale(1,1)},e.prototype.useDataUpdate=function(t){var e=this;0==t.errorCode?t.a&&(t.a.username&&api.GlobalAPI.userData.setUserName(t.a.username),t.a.coins?api.GlobalAPI.userData.setUserCoins(t.a.coins):api.GlobalAPI.userData.setUserCoins(0),this.iconShow(t.a.icon)):1==t.errorCode?api.createAlert("用户不存在,返回登录界面",1,function(t){1==t&&(e.dispose(),gui.addScene(LoginView))}):2==t.errorCode&&api.createAlert("其他错误返回登录界面",1,function(t){1==t&&(e.dispose(),gui.addScene(LoginView))}),this.update()},e.prototype.iconShow=function(t){0==t&&(t=1),this.headIcon.myId=t,api.GlobalAPI.userData.setUserIcon(this.headIcon.myId)},e.prototype.update=function(){this.setText(0,api.GlobalAPI.userData.getUserName()),this.setText(1,api.GlobalAPI.userData.getUserCoins())},e.prototype.clickHandler=function(e){var i=this;switch(t.prototype.clickHandler.call(this,e),e){case 100:api.GlobalAPI.webSocket.request(GameEvent.AddCoins,{},this.addCoinsBack.bind(this));break;case 1:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:1},function(t){0==t.errorCode?(gameTool.stage.setContentSize(1920,1080),gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE,api.GlobalAPI.moduleManager.openModule("redProject"),i.dispose()):api.createAlert("游戏维护中")});break;case 2:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:2},function(t){0==t.errorCode?(gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE,gameTool.stage.setContentSize(1920,1080),api.GlobalAPI.moduleManager.openModule("fishGame"),i.dispose()):api.createAlert("游戏维护中")});break;case 3:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:4},function(t){0==t.errorCode?(gameTool.stage.orientation=egret.OrientationMode.LANDSCAPE,gameTool.stage.setContentSize(1920,1080),api.GlobalAPI.moduleManager.openModule("sweepGame"),i.dispose()):api.createAlert("游戏维护中")});break;case 4:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:5},function(t){0==t.errorCode?(api.GlobalAPI.moduleManager.openModule("gzHero"),i.dispose()):api.createAlert("游戏维护中")});break;case 5:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:6},function(t){0==t.errorCode?(api.GlobalAPI.moduleManager.openModule("feidao"),i.dispose()):api.createAlert("游戏维护中")});break;case 6:api.GlobalAPI.webSocket.request(GameEvent.getingame,{gameid:7},function(t){0==t.errorCode?(api.GlobalAPI.moduleManager.openModule("rouge"),i.dispose()):api.createAlert("游戏维护中")});break;case 7:api.GlobalAPI.moduleManager.openModule("xq"),this.dispose();break;case 98:this.c1.setSelectedIndex(1)}},e.prototype.inRoom=function(){this.dispose(),setTimeout(function(){var t="47.52.32.227",e=9994;api.GlobalAPI.webSocket.connectServer(t+":"+e,function(){gui.addScene(LoginView)})},500)},e.prototype.addCoinsBack=function(t){t.a&&(this.setText(1,t.a.coins),api.GlobalAPI.userData.setUserCoins(t.a.coins))},e}(gui.OvBase);__reflect(PcDoorView.prototype,"PcDoorView");