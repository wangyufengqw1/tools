var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a};var Zlib;var USE_TYPEDARRAY=typeof Uint8Array!=="undefined"&&typeof Uint16Array!=="undefined"&&typeof Uint32Array!=="undefined"&&typeof DataView!=="undefined";(function(e){var t=function(){};t.buildHuffmanTable=function(e){var t=e.length;var a=0;var r=Number.POSITIVE_INFINITY;var i;var n;var f;var s;var h;var l;var o;var u;var p;var b;var d;for(u=0,p=t;u<p;++u){if(e[u]>a){a=e[u]}if(e[u]<r){r=e[u]}}i=1<<a;n=new(USE_TYPEDARRAY?Uint32Array:Array)(i);for(f=1,s=0,h=2;f<=a;){for(u=0;u<t;++u){if(e[u]===f){for(l=0,o=s,b=0;b<f;++b){l=l<<1|o&1;o>>=1}d=f<<16|u;for(b=l;b<i;b+=h){n[b]=d}++s}}++f;s<<=1;h<<=1}return[n,a,r]};e.Huffman=t;__reflect(t.prototype,"Zlib.Huffman")})(Zlib||(Zlib={}));var ZLIB_RAW_INFLATE_BUFFER_SIZE=32768;var buildHuffmanTable=Zlib.Huffman.buildHuffmanTable;(function(b){var e=function(e,t){this.buffer;this.blocks=[];this.bufferSize=ZLIB_RAW_INFLATE_BUFFER_SIZE;this.totalpos=0;this.ip=0;this.bitsbuf=0;this.bitsbuflen=0;this.input=USE_TYPEDARRAY?new Uint8Array(e):e;this.output;this.op;this.bfinal=false;this.bufferType=b.RawInflate.BufferType.ADAPTIVE;this.resize=false;if(t||!(t={})){if(t["index"]){this.ip=t["index"]}if(t["bufferSize"]){this.bufferSize=t["bufferSize"]}if(t["bufferType"]){this.bufferType=t["bufferType"]}if(t["resize"]){this.resize=t["resize"]}}switch(this.bufferType){case b.RawInflate.BufferType.BLOCK:this.op=b.RawInflate.MaxBackwardLength;this.output=new(USE_TYPEDARRAY?Uint8Array:Array)(b.RawInflate.MaxBackwardLength+this.bufferSize+b.RawInflate.MaxCopyLength);break;case b.RawInflate.BufferType.ADAPTIVE:this.op=0;this.output=new(USE_TYPEDARRAY?Uint8Array:Array)(this.bufferSize);break;default:throw new Error("invalid inflate mode")}};e.BufferType={BLOCK:0,ADAPTIVE:1};e.prototype.decompress=function(){while(!this.bfinal){this.parseBlock()}switch(this.bufferType){case b.RawInflate.BufferType.BLOCK:return this.concatBufferBlock();case b.RawInflate.BufferType.ADAPTIVE:return this.concatBufferDynamic();default:throw new Error("invalid inflate mode")}};e.MaxBackwardLength=32768;e.MaxCopyLength=258;e.Order=function(e){return USE_TYPEDARRAY?new Uint16Array(e):e}([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);e.LengthCodeTable=function(e){return USE_TYPEDARRAY?new Uint16Array(e):e}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]);e.LengthExtraTable=function(e){return USE_TYPEDARRAY?new Uint8Array(e):e}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]);e.DistCodeTable=function(e){return USE_TYPEDARRAY?new Uint16Array(e):e}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]);e.DistExtraTable=function(e){return USE_TYPEDARRAY?new Uint8Array(e):e}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);e.FixedLiteralLengthTable=function(e){return e}(function(){var e=new(USE_TYPEDARRAY?Uint8Array:Array)(288);var t,a;for(t=0,a=e.length;t<a;++t){e[t]=t<=143?8:t<=255?9:t<=279?7:8}return buildHuffmanTable(e)}());e.FixedDistanceTable=function(e){return e}(function(){var e=new(USE_TYPEDARRAY?Uint8Array:Array)(30);var t,a;for(t=0,a=e.length;t<a;++t){e[t]=5}return buildHuffmanTable(e)}());e.prototype.parseBlock=function(){var e=this.readBits(3);if(e&1){this.bfinal=true}e>>>=1;switch(e){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+e)}};e.prototype.readBits=function(e){var t=this.bitsbuf;var a=this.bitsbuflen;var r=this.input;var i=this.ip;var n=r.length;var f;if(i+(e-a+7>>3)>=n){throw new Error("input buffer is broken")}while(a<e){t|=r[i++]<<a;a+=8}f=t&(1<<e)-1;t>>>=e;a-=e;this.bitsbuf=t;this.bitsbuflen=a;this.ip=i;return f};e.prototype.readCodeByTable=function(e){var t=this.bitsbuf;var a=this.bitsbuflen;var r=this.input;var i=this.ip;var n=r.length;var f=e[0];var s=e[1];var h;var l;while(a<s){if(i>=n){break}t|=r[i++]<<a;a+=8}h=f[t&(1<<s)-1];l=h>>>16;if(l>a){throw new Error("invalid code length: "+l)}this.bitsbuf=t>>l;this.bitsbuflen=a-l;this.ip=i;return h&65535};e.prototype.parseUncompressedBlock=function(){var e=this.input;var t=this.ip;var a=this.output;var r=this.op;var i=e.length;var n;var f;var s=a.length;var h;this.bitsbuf=0;this.bitsbuflen=0;if(t+1>=i){throw new Error("invalid uncompressed block header: LEN")}n=e[t++]|e[t++]<<8;if(t+1>=i){throw new Error("invalid uncompressed block header: NLEN")}f=e[t++]|e[t++]<<8;if(n===~f){throw new Error("invalid uncompressed block header: length verify")}if(t+n>e.length){throw new Error("input buffer is broken")}switch(this.bufferType){case b.RawInflate.BufferType.BLOCK:while(r+n>a.length){h=s-r;n-=h;if(USE_TYPEDARRAY){a.set(e.subarray(t,t+h),r);r+=h;t+=h}else{while(h--){a[r++]=e[t++]}}this.op=r;a=this.expandBufferBlock();r=this.op}break;case b.RawInflate.BufferType.ADAPTIVE:while(r+n>a.length){a=this.expandBufferAdaptive({fixRatio:2})}break;default:throw new Error("invalid inflate mode")}if(USE_TYPEDARRAY){a.set(e.subarray(t,t+n),r);r+=n;t+=n}else{while(n--){a[r++]=e[t++]}}this.ip=t;this.op=r;this.output=a};e.prototype.parseFixedHuffmanBlock=function(){switch(this.bufferType){case b.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(b.RawInflate.FixedLiteralLengthTable,b.RawInflate.FixedDistanceTable);break;case b.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(b.RawInflate.FixedLiteralLengthTable,b.RawInflate.FixedDistanceTable);break;default:throw new Error("invalid inflate mode")}};e.prototype.parseDynamicHuffmanBlock=function(){var e=this.readBits(5)+257;var t=this.readBits(5)+1;var a=this.readBits(4)+4;var r=new(USE_TYPEDARRAY?Uint8Array:Array)(b.RawInflate.Order.length);var i;var n;var f;var s;var h;var l;var o;var u;var p;for(u=0;u<a;++u){r[b.RawInflate.Order[u]]=this.readBits(3)}if(!USE_TYPEDARRAY){for(u=a,a=r.length;u<a;++u){r[b.RawInflate.Order[u]]=0}}i=buildHuffmanTable(r);s=new(USE_TYPEDARRAY?Uint8Array:Array)(e+t);for(u=0,p=e+t;u<p;){h=this.readCodeByTable(i);switch(h){case 16:o=3+this.readBits(2);while(o--){s[u++]=l}break;case 17:o=3+this.readBits(3);while(o--){s[u++]=0}l=0;break;case 18:o=11+this.readBits(7);while(o--){s[u++]=0}l=0;break;default:s[u++]=h;l=h;break}}n=USE_TYPEDARRAY?buildHuffmanTable(s.subarray(0,e)):buildHuffmanTable(s.slice(0,e));f=USE_TYPEDARRAY?buildHuffmanTable(s.subarray(e)):buildHuffmanTable(s.slice(e));switch(this.bufferType){case b.RawInflate.BufferType.ADAPTIVE:this.decodeHuffmanAdaptive(n,f);break;case b.RawInflate.BufferType.BLOCK:this.decodeHuffmanBlock(n,f);break;default:throw new Error("invalid inflate mode")}};e.prototype.decodeHuffmanBlock=function(e,t){var a=this.output;var r=this.op;this.currentLitlenTable=e;var i=a.length-b.RawInflate.MaxCopyLength;var n;var f;var s;var h;var l=b.RawInflate.LengthCodeTable;var o=b.RawInflate.LengthExtraTable;var u=b.RawInflate.DistCodeTable;var p=b.RawInflate.DistExtraTable;while((n=this.readCodeByTable(e))!==256){if(n<256){if(r>=i){this.op=r;a=this.expandBufferBlock();r=this.op}a[r++]=n;continue}f=n-257;h=l[f];if(o[f]>0){h+=this.readBits(o[f])}n=this.readCodeByTable(t);s=u[n];if(p[n]>0){s+=this.readBits(p[n])}if(r>=i){this.op=r;a=this.expandBufferBlock();r=this.op}while(h--){a[r]=a[r++-s]}}while(this.bitsbuflen>=8){this.bitsbuflen-=8;this.ip--}this.op=r};e.prototype.decodeHuffmanAdaptive=function(e,t){var a=this.output;var r=this.op;this.currentLitlenTable=e;var i=a.length;var n;var f;var s;var h;var l=b.RawInflate.LengthCodeTable;var o=b.RawInflate.LengthExtraTable;var u=b.RawInflate.DistCodeTable;var p=b.RawInflate.DistExtraTable;while((n=this.readCodeByTable(e))!==256){if(n<256){if(r>=i){a=this.expandBufferAdaptive();i=a.length}a[r++]=n;continue}f=n-257;h=l[f];if(o[f]>0){h+=this.readBits(o[f])}n=this.readCodeByTable(t);s=u[n];if(p[n]>0){s+=this.readBits(p[n])}if(r+h>i){a=this.expandBufferAdaptive();i=a.length}while(h--){a[r]=a[r++-s]}}while(this.bitsbuflen>=8){this.bitsbuflen-=8;this.ip--}this.op=r};e.prototype.expandBufferBlock=function(e){var t=new(USE_TYPEDARRAY?Uint8Array:Array)(this.op-b.RawInflate.MaxBackwardLength);var a=this.op-b.RawInflate.MaxBackwardLength;var r;var i;var n=this.output;if(USE_TYPEDARRAY){t.set(n.subarray(b.RawInflate.MaxBackwardLength,t.length))}else{for(r=0,i=t.length;r<i;++r){t[r]=n[r+b.RawInflate.MaxBackwardLength]}}this.blocks.push(t);this.totalpos+=t.length;if(USE_TYPEDARRAY){n.set(n.subarray(a,a+b.RawInflate.MaxBackwardLength))}else{for(r=0;r<b.RawInflate.MaxBackwardLength;++r){n[r]=n[a+r]}}this.op=b.RawInflate.MaxBackwardLength;return n};e.prototype.expandBufferAdaptive=function(e){var t;var a=this.input.length/this.ip+1|0;var r;var i;var n;var f=this.input;var s=this.output;if(e){if(typeof e.fixRatio==="number"){a=e.fixRatio}if(typeof e.addRatio==="number"){a+=e.addRatio}}if(a<2){r=(f.length-this.ip)/this.currentLitlenTable[2];n=r/2*258|0;i=n<s.length?s.length+n:s.length<<1}else{i=s.length*a}if(USE_TYPEDARRAY){t=new Uint8Array(i);t.set(s)}else{t=s}this.output=t;return this.output};e.prototype.concatBufferBlock=function(){var e=0;var t=this.totalpos+(this.op-b.RawInflate.MaxBackwardLength);var a=this.output;var r=this.blocks;var i;var n=new(USE_TYPEDARRAY?Uint8Array:Array)(t);var f;var s;var h;var l;if(r.length===0){return USE_TYPEDARRAY?this.output.subarray(b.RawInflate.MaxBackwardLength,this.op):this.output.slice(b.RawInflate.MaxBackwardLength,this.op)}for(f=0,s=r.length;f<s;++f){i=r[f];for(h=0,l=i.length;h<l;++h){n[e++]=i[h]}}for(f=b.RawInflate.MaxBackwardLength,s=this.op;f<s;++f){n[e++]=a[f]}this.blocks=[];this.buffer=n;return this.buffer};e.prototype.concatBufferDynamic=function(){var e;var t=this.op;if(USE_TYPEDARRAY){if(this.resize){e=new Uint8Array(t);e.set(this.output.subarray(0,t))}else{e=this.output.subarray(0,t)}}else{if(this.output.length>t){this.output.length=t}e=this.output}this.buffer=e;return this.buffer};b.RawInflate=e;__reflect(e.prototype,"Zlib.RawInflate")})(Zlib||(Zlib={}));(function(f){var s=function(e,t){var a;var r;var i;var n;this.input=e;this.ip=0;this.rawinflate;this.verify;if(t||!(t={})){if(t["index"]){this.ip=t["index"]}if(t["verify"]){this.verify=t["verify"]}}i=e[this.ip++];n=e[this.ip++];switch(i&15){case 8:this.method=8;break;default:throw new Error("unsupported compression method")}if(((i<<8)+n)%31!==0){throw new Error("invalid fcheck flag:"+((i<<8)+n)%31)}if(n&32){throw new Error("fdict flag is not supported")}this.rawinflate=new f.RawInflate(e,{index:this.ip,bufferSize:t["bufferSize"],bufferType:t["bufferType"],resize:t["resize"]});s.prototype.decompress=function(){var e=this.input;var t;var a;t=this.rawinflate.decompress();this.ip=this.rawinflate.ip;if(this.verify){a=(e[this.ip++]<<24|e[this.ip++]<<16|e[this.ip++]<<8|e[this.ip++])>>>0;if(a!==f.Adler32(t)){throw new Error("invalid adler-32 checksum")}}return t};s.BufferType=f.RawInflate.BufferType};f.Inflate=s;__reflect(s.prototype,"Zlib.Inflate")})(Zlib||(Zlib={}));