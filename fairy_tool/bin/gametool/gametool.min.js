var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},gameTool;!function(t){var e=function(){function e(){this._list={}}return e.prototype.dispose=function(){for(var t in this._list)this._list[t].dispose(),this._list[t]=null,delete this._list[t]},e.prototype.addBatch=function(t){var e=t.length,i=0;for(i=0;e>i;i++)this.keyToCl(t[i])},e.prototype.addSingal=function(t){this.keyToCl(t)},e.prototype.getInstance=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=definiton.getNameByClass(t);this.checkListData(t);var o=(r=this._list[n]).getFreeObj.apply(r,e);return o;var r},e.prototype.remove=function(t){this._list[definiton.getClassNameByObject(t)].retrieve(t)},e.prototype.removeFrontObj=function(t){var e=definiton.getNameByClass(t),i=this._list[e];i.getList().length&&this._list[e].retrieve(i.getList()[0])},e.prototype.removeBackObj=function(t){var e=definiton.getNameByClass(t),i=this._list[e];i.getList().length&&this._list[e].retrieve(i.getList()[i.getList().length-1])},e.prototype.getActivityObj=function(t){var e=definiton.getNameByClass(t);return this.checkListData(t),this._list[e].getList()},e.prototype.play=function(t){this.checkListData(t),this.playByMethod(definiton.getNameByClass(t),"play")},e.prototype.playByMethod=function(t,e,i,n,o){var r=this._list[t],s=r.getList(),a=n?mathTool.findList(s,n,o):s;for(var u in a)"string"==typeof e?i&&typeof i[0]==typeof a[u][e]?a[u][e]=i[0]:a[u][e].apply(a[u],i):e.apply(a[u],i)},e.prototype.removeAll=function(t){for(var e=this.getActivityObj(t);e.length;)this.remove(e[e.length-1])},e.prototype.disposeAll=function(t){for(var e=this.getActivityObj(t);e.length;){var i=e[e.length-1];this.remove(i)}var n=definiton.getNameByClass(t);this._list[n].clearPool()},e.prototype.keyToCl=function(e){this._list[e.getKey()]||(this._list[e.getKey()]=new t.GamePool(e.getCl(),e.getInitObj()))},e.prototype.checkListData=function(e){var i=definiton.getNameByClass(e);null==this._list[i]&&this.keyToCl(new t.ListData(e))},e}();t.List=e,__reflect(e.prototype,"gameTool.List")}(gameTool||(gameTool={}));var gui;!function(t){function e(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return(n=gameTool.singleton(d)).addScene.apply(n,[t].concat(e));var n}function i(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return(n=gameTool.singleton(d)).addBox.apply(n,[t].concat(e));var n}function n(t){gameTool.singleton(d).remove(t)}function o(t){gameTool.singleton(d).initRootView(t)}function r(t,e){gameTool.singleton(d).addDisplayToStage(t,e)}function s(t,e){gameTool.singleton(d).addGComponentToStage(t,e)}function a(t){return gameTool.singleton(d).hasWindowTypeInStage(t)}function u(){return gameTool.singleton(d).removeAllView()}function c(t){return gameTool.singleton(d).removeViewByClass(t)}function l(){return gameTool.singleton(d).getPrevScene()}function h(){return gameTool.singleton(d).prevScene()}function p(t){gameTool.singleton(d).pushScene(t)}var d=function(){function e(){this._windowClassList={},this._windowList={},this._scenes=[]}return e.prototype.initRootView=function(t){this._root=t,this._layers={},this._layerIndexs=[],this.addDisplayToStage(fairygui.GRoot.inst.displayObject,define.WindowType.POP_LAYER)},e.prototype.addDisplayToStage=function(t,e){if(null==this._layers[e]){var i=new egret.DisplayObjectContainer;this._layers[e]=i,this._layers[gameTool.getTypeId(i)]=!0,this._layerIndexs.push(e),this._layerIndexs.sort(function(t,e){return t-e});var n=this._layerIndexs.indexOf(e);gameTool.display.setFullDisplay(i),this._root.addChildAt(this._layers[e],n)}this._layers[e].addChild(t)},e.prototype.addGComponentToStage=function(t,e){this.addDisplayToStage(t.displayObject,e)},e.prototype.inLayer=function(t){return this._layers[gameTool.getTypeId(t)]},e.prototype.addScene=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return definiton.isClass(t)&&this._curScene&&definiton.getClassByObject(this._curScene)==t?void 0:(this._curScene&&this.remove(this._curScene),this._curScene=this.addWindow.apply(this,[t,define.UITypeDefine.SCENE].concat(e)),this._curScene.inSceneQueue=!0,this._curScene)},e.prototype.addBox=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.addWindow.apply(this,[t,define.UITypeDefine.BOX].concat(e))},e.prototype.remove=function(t){var e=this;if(!t.inClose){t.inClose=!0,t.inSceneQueue&&mathTool.addValueByArray(definiton.getClassByObject(t),this._scenes),this._curScene==t&&(this._curScene=null);var i=t.animation;if(notification.removeNotificationByObject(t),i){if(i.inClose)return;i.close(function(t){e.removeView(t)},this,t)}else this.removeView(t)}},e.prototype.addWindow=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o;if(definiton.isClass(t)){var r=t;o=new r}else o=t;o.inClose=!1,o.uiType==define.UITypeDefine.NONE&&(o.uiType=e),fairygui.GRoot.inst.showWindow(o),o.enter.apply(o,i);var s=definiton.getClassNameByObject(o);return null==this._windowClassList[s]?this._windowClassList[s]=[o]:this._windowClassList[s].push(o),this._windowList[gameTool.getTypeId(o)]=o,o},e.prototype.hasWindowTypeInStage=function(t){var e=this._windowClassList[definiton.getNameByClass(t)];return null!=e&&e.length>0},e.prototype.removeViewByClass=function(t){var e=this._windowClassList[definiton.getNameByClass(t)];for(var i in e)this.remove(e[i])},e.prototype.removeAllView=function(){for(var t in this._windowList)this.remove(this._windowList[t])},e.prototype.getPrevScene=function(){return this._scenes.length>0?this._scenes[this._scenes.length-1]:null},e.prototype.prevScene=function(){if(!this.getPrevScene())return!1;var e=this._curScene,i=e.inSceneQueue;return e.inSceneQueue=!1,t.addScene(this._scenes.pop()),e.inSceneQueue=i,!0},e.prototype.pushScene=function(t){this._scenes.push(t)},e.prototype.removeView=function(t){var e=gameTool.getTypeId(t);this._windowList[e]=null,delete this._windowList[e],mathTool.cutValueByArray(t,this._windowClassList[definiton.getClassNameByObject(t)]),t.exit();var i=t.uiType;switch(i){case define.UITypeDefine.SCENE:t.dispose();break;case define.UITypeDefine.BOX:t.dispose();break;default:t.dispose()}},e}();t.WindowManager=d,__reflect(d.prototype,"gui.WindowManager"),t.addScene=e,t.addBox=i,t.remove=n,t.initRootView=o,t.addDisplayToStage=r,t.addGComponentToStage=s,t.hasWindowTypeInStage=a,t.removeAllView=u,t.removeViewByClass=c,t.getPrevScene=l,t.prevScene=h,t.pushScene=p;var f=function(e){function i(t,i){void 0===t&&(t=!0),void 0===i&&(i=!0);var n=e.call(this)||this;return n.modal=t,n._isCenter=i,n._buttonList=[],n._uiType=define.UITypeDefine.NONE,delay.createDelayMain(n),n}return __extends(i,e),i.prototype.enter=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(delay.hasDelayMain(this))return void delay.addDelayTransact.apply(delay,[this,this.enter].concat(e));switch(this._uiType){case define.UITypeDefine.SCENE:this.animation=new t.SceneAnimation;break;case define.UITypeDefine.BOX:this.animation=new t.BoxAnimation}this._animation&&this._animation.show(this.show,this),this.open.apply(this,e)},i.prototype.updateViewData=function(){},i.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},i.prototype.show=function(){},i.prototype.exit=function(){bind.removeBindByObject(this)},i.prototype.onInit=function(){e.prototype.onInit.call(this),this.initView(),this.initEvent(),this.registerButtons(this._ui),this.setSize(gameTool.display.stageW,gameTool.display.stageH),this.addRelation(this._ui,fairygui.RelationType.Size),this._isCenter&&(this._ui.x=.5*(gameTool.stage.stageWidth-this._ui.width),this._ui.y=.5*(gameTool.stage.stageHeight-this._ui.height)),this._ui.setPivot(.5,.5),delay.executeAllTransact(this),window&&(window.onresize=this.onResize.bind(this))},i.prototype.onResize=function(){},i.prototype.dispose=function(){if(gameTool.destoryChildrenNotice(this),this._buttonList){for(var t=this._buttonList.length,i=0;t>i;i++){var n=this._buttonList[i];n.removeClickListener(this.onClick,this)}this._buttonList.length=0}this._bg&&(this._bg.dispose(),this._bg=null),this._ui&&(this._ui.dispose(),this._ui=null),this.mainView&&(this.mainView.dispose(),this.mainView=null),this._animation&&(this._animation.dispose(),this._animation=null),e.prototype.dispose.call(this)},i.prototype.initView=function(){},i.prototype.initEvent=function(){},i.prototype.removeEvent=function(){},i.prototype.onClick=function(t){},i.prototype.registerButtons=function(t){if(null==t)throw new Error("窗口不存在，不能注册按钮");for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n instanceof fairygui.GButton&&this.getButton(n.name,t)}},i.prototype.getButton=function(t,e){void 0===e&&(e=null);var i=this.getComponent(t,e);return this._buttonList.indexOf(i)>=0?i:(this._buttonList.push(i),i.addClickListener(this.onClick,this),i)},i.prototype.getComponent=function(t,e){void 0===e&&(e=null);var i;if(i=null==e?this._ui:e,null==i)throw new Error("父容器是空的");return i.getChild(t)},i.prototype.getTextField=function(t,e){return void 0===e&&(e=null),this.getComponent(t,e).asTextField},i.prototype.getList=function(t,e){return void 0===e&&(e=null),this.getComponent(t,e)},i.prototype.getLoader=function(t,e){return void 0===e&&(e=null),this.getComponent(t,e).asLoader},Object.defineProperty(i.prototype,"animation",{get:function(){return this._animation},set:function(t){this._animation&&this._animation.dispose(),this._animation=t,t.component=this._ui},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"uiType",{get:function(){return this._uiType},set:function(t){this._uiType!=t&&(this._uiType=t)},enumerable:!0,configurable:!0}),i.prototype.getViewData=function(){return this._viewData},i.prototype.setViewData=function(t){return delay.hasDelayMain(this)?void delay.addDelayTransact(this,this.setViewData,t):(this._viewData=t,void this.updateViewData())},i}(fairygui.Window);t.BaseWindow=f,__reflect(f.prototype,"gui.BaseWindow")}(gui||(gui={}));var extendsUI;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._hitRect=new egret.Rectangle,e}return __extends(e,t),e.prototype.dispose=function(){notification.removeNotificationByObject(this),this.parent&&this.parent.removeChild(this),this._hitRect=null},e.prototype.intersectsByContainer=function(t){return this.hitRect.intersects(t.hitRect)},e.prototype.containsPoint=function(t,e){return this.hitRect.contains(t,e)},Object.defineProperty(e.prototype,"hitRect",{get:function(){var t=this.scaleX*(this.scaleX<0?this.anchorOffsetX-this.width:this.anchorOffsetX),e=this.scaleY*(this.scaleY<0?this.anchorOffsetY-this.height:this.anchorOffsetY);return this._hitRect.x=this.x-t,this._hitRect.y=this.y-e,this._hitRect.width=Math.abs(this.width*this.scaleX),this._hitRect.height=Math.abs(this.height*this.scaleY),this._hitRect},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);t.BaseContainer=e,__reflect(e.prototype,"extendsUI.BaseContainer")}(extendsUI||(extendsUI={}));var gui;!function(t){var e=function(e){function i(t,i,n,o,r){void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===r&&(r=null);var s=e.call(this,n,o)||this;if(s._pkgName=t,s._resName=i,s.className=t+"_"+i,null==fairygui.UIPackage.getByName(t))if(RES.getRes(t)||RES.getRes(t+"_fui"))fairygui.UIPackage.addPackage(t),s.initUI(t,i);else{if(!RES.getGroupByName(t))throw new Error("没有对应的"+t+"资源组");loadUtil.loadGroup(t,r,s.loadResComplete,s)}else s.initUI(t,i);return s}return __extends(i,e),i.prototype.dispose=function(){if(t.removeBindGuiProperty(this),this._textList){for(var i=this._textList.length,n=0;i>n;n++)this._textList[n].dispose();this._textList=null}if(this._ivs){for(var i=this._ivs.length,n=0;i>n;n++)this._ivs[n].dispose();this._ivs=null}e.prototype.dispose.call(this)},i.prototype.updateItemView=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];(n=this._ivs[t]).update.apply(n,e);var n},i.prototype.setText=function(t,e){this._textList[t].text=e.toString()},i.prototype.getText=function(t){return this._textList[t].text},i.prototype.getTextFiled=function(t){return this._textList[t]},i.prototype.fullWindow=function(t,e){void 0===t&&(t=750),void 0===e&&(e=1334);var i=gameTool.stage.stageHeight,n=gameTool.stage.stageWidth,o=t/n,r=e/i;r>o?this._ui.setSize(t,i*o):this._ui.setSize(n*r,e),this._ui.setXY(0,0)},i.prototype.onInit=function(){null!=fairygui.UIPackage.getByName(this._pkgName)&&e.prototype.onInit.call(this)},i.prototype.initView=function(){e.prototype.initView.call(this),this._textList=[],this._ivs=[],this.registerTexts(this._ui)},i.prototype.onClick=function(e){var i=e.currentTarget.name,n="btn",o=i.indexOf(n);if(!(0>o)){switch(o=parseInt(i.substr(n.length))){case 0:t.remove(this)}this.clickHandler(o)}},i.prototype.clickHandler=function(t){},i.prototype.registerTexts=function(t){if(null==t)throw new Error("窗口不存在，不能注册按钮").message;for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n instanceof fairygui.GTextField&&n.name.indexOf("text")>-1&&this._textList.push(n)}this._textList.sort(this.onTextSort)},i.prototype.initUI=function(e,i){this.mainView=fairygui.UIPackage.createObject(e,i).asCom,this._ui=this.mainView.getChild("ui").asCom,this._bg=this.mainView.getChild("bg").asCom,this.onResize(),t.bindGuiProperty(this,this._ui),this.init(),this.addChild(this.mainView)},i.prototype.onResize=function(){if(this._ui){var t=(document.documentElement.clientHeight,document.documentElement.clientWidth,gameTool.stage.stageHeight),e=gameTool.stage.stageWidth,i=this.mainView.width/e,n=this.mainView.height/t;n>i&&this._ui.setScale(t/this.mainView.height,t/this.mainView.height),this._ui.y>0&&this._ui.setXY(this._ui.x,0),this._ui.x>0&&this._ui.setXY(0,this._ui.y)}},i.prototype.loadResComplete=function(){var t=this,e=egret.setTimeout(function(){egret.clearTimeout(e),t._inited=!1,fairygui.UIPackage.addPackage(t._pkgName),t.initUI(t._pkgName,t._resName)},this,100)},i.prototype.onTextSort=function(t,e){var i=parseInt(t.name.substr(4)),n=parseInt(e.name.substr(4));return n>i?-1:i>n?1:0},i}(t.BaseWindow);t.OvBase=e,__reflect(e.prototype,"gui.OvBase")}(gui||(gui={}));var gameTool;!function(t){function e(t){var e=n(t);return g.hasOwnProperty(e)||(g[e]=new t,g[e][y]=e),g[e]}function i(t,e){var i=t+n(e);return g.hasOwnProperty(i)||(g[i]=new e),g[i]}function n(t){return t.hasOwnProperty(y)||(m++,t[y]="__type_id_"+m),t[y]}function o(t){if(t.hasOwnProperty(y)){var e=t[y];g.hasOwnProperty(e)&&(delete g[e][y],delete g[e])}}function r(t){return t&&t.hasOwnProperty(y)?t[y]:0}function s(t){var e=t.split("/"),i=e[e.length-1];return e=i.split("."),e[0]}function a(t){t&&t.parent&&t.parent.removeChild(t)}function u(t){for(t.parent&&t.parent.removeChild(t),o(t),notification.removeNotificationByObject(t);t.numChildren;){var e=t.getChildAt(0);this.destoryChildren(e)}}function c(t){o(t),notification.removeNotificationByObject(t);for(var e=t.numChildren,i=e-1;i>0;i--){var n=t.getChildAt(i);this.destoryChildren(n)}}function l(i){t.main=i,t.stage=i.stage,e(sound.SoundManager).init(t.stage),e(app_sound.SoundManager).init(t.stage),gui.initRootView(t.main),t.display.setFullDisplay(i),t.display.setFullDisplay(fairygui.GRoot.inst.displayObject),fairygui.UIPackage.addPackage("common"),notification.addNotification(define.Data.ERROR,function(t){console.log("请求错误:"+t.des+"  code: "+t.num)},this)}function h(t){}function p(){return"iOS"==egret.Capabilities.os}function d(){var t=window.location.href.split("?")[0];return t.indexOf("/#")&&(t=t.replace("/#","")),t}function f(t){t.parent&&t.parent.removeChild(t)}function _(e){for(;e.parent&&e.parent!=t.main&&e.parent!=t.stage;)e=e.parent;return null!=e.parent}var g={};t.singleton=e,t.typeSingleton=i;var m=1,y="__object_type_id__";t.getTypeId=n,t.disposeSingle=o,t.hasTypeId=r,t.getFileExtName=s,t.removeFromParent=a,t.destoryChildren=u,t.destoryChildrenNotice=c,t.init=l,t.poolList=t.singleton(t.List),t.sendNoticoeByComponent=h,t.isIOS=p,t.getHost=d,t.removeStage=f,t.inStage=_}(gameTool||(gameTool={}));var gui;!function(t){var e=function(){function t(t,e,i){this._num=0,this._totalNum=0,this._min=0,this._com=t,this._numText=this._com.getChild("num").asTextField,this._numText.addEventListener(egret.Event.CHANGE,this.onTextChange,this),this.num=0,this._onChangeHandler=e,this._callThisObj=i}return t.prototype.dispose=function(){this._reduceBtn&&(this._reduceBtn.removeClickListener(this.onPre,this),this._addBtn.removeClickListener(this.onNext,this)),this._numText.removeEventListener(egret.Event.CHANGE,this.onTextChange,this),this._maxBtn&&this._maxBtn.removeClickListener(this.onMax,this),this._minBtn&&this._minBtn.removeClickListener(this.onMin,this),this._com.dispose(),this._com=null,this._callThisObj=null,this._minBtn=null,this._maxBtn=null,this._reduceBtn=null,this._addBtn=null,this._onChangeHandler=null},t.prototype.onTextChange=function(t){return""==this._numText.text?(this._num=0,void this.onNumChange()):void(this.num=parseInt(this._numText.text))},t.prototype.onNumChange=function(){this._reduceBtn&&(this._reduceBtn.enabled=this._num>0,this._addBtn.enabled=this._num<this._totalNum),this._onChangeHandler&&this._onChangeHandler.call(this._callThisObj)},t.prototype.onPre=function(){this.num--},t.prototype.onNext=function(){this.num++},t.prototype.onMax=function(){this.num=this._totalNum},t.prototype.onMin=function(){this.num=this._min},Object.defineProperty(t.prototype,"oneChange",{set:function(t){t&&(this._reduceBtn=this._com.getChild("reduce").asButton,this._addBtn=this._com.getChild("add").asButton,this._reduceBtn.addClickListener(this.onPre,this),this._addBtn.addClickListener(this.onNext,this),this.onNumChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{set:function(t){this._min=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minBtn",{set:function(t){t&&(this._minBtn=this._com.getChild("min").asButton,this._minBtn.addClickListener(this.onMin,this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxBtn",{set:function(t){t&&(this._maxBtn=this._com.getChild("max").asButton,this._maxBtn.addClickListener(this.onMax,this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._totalNum},set:function(t){this._totalNum=t,this._addBtn&&(this._addBtn.enabled=this._num<this._totalNum),this._num>this._totalNum&&(this._num=this._totalNum),this._num<this._min&&(this._num=this._min),this._numText.text=this._num.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"num",{get:function(){return this._num},set:function(t){this._num=t,this._num<0&&(this._num=0),this._num>this._totalNum&&(this._num=this._totalNum),this._num<this._min&&(this._num=this._min),this.onNumChange(),this._numText.text=String(this._num)},enumerable:!0,configurable:!0}),t}();t.NumSelect=e,__reflect(e.prototype,"gui.NumSelect")}(gui||(gui={}));var define;!function(t){var e=function(){function t(){}return t.NONE=-1,t.IMMEDIATE=0,t.SCENE=1,t.BOX=2,t}();t.UITypeDefine=e,__reflect(e.prototype,"define.UITypeDefine")}(define||(define={}));var define;!function(t){var e=function(){function t(){}return t.SCENE_LAYER=0,t.POP_LAYER=1,t.TIP_LAYER=2,t}();t.WindowType=e,__reflect(e.prototype,"define.WindowType")}(define||(define={}));var face;!function(t){var e=function(){function t(){}return t}();t.IMap=e,__reflect(e.prototype,"face.IMap")}(face||(face={}));var component;!function(t){var e=function(){function t(){this._components={}}return t.prototype.dispose=function(){this.removeAllComponent(),this._components=null},t.prototype.addComponent=function(t){var e=definiton.getNameByClass(t);if(!(e in this._components)){var i=gameTool.poolList.getInstance(t);return i.type!=e&&trace.error("组件类型不对应: ",[e,i.type]),this._components[e]=i,i}},t.prototype.removeComponent=function(t){gameTool.poolList.remove(this._components[t]),delete this._components[t]},t.prototype.getComponent=function(t){var e=definiton.getNameByClass(t);return e in this._components?this._components[e]:null},t.prototype.containComponent=function(t){var e=definiton.getNameByClass(t);return e in this._components},t.prototype.removeAllComponent=function(){for(var t in this._components)this.removeComponent(t)},t}();t.Entity=e,__reflect(e.prototype,"component.Entity");var i=function(){function t(){}return Object.defineProperty(t.prototype,"type",{get:function(){return definiton.getClassNameByObject(this)},enumerable:!0,configurable:!0}),t}();t.Component=i,__reflect(i.prototype,"component.Component");var n=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dispose=function(){this.hasInit&&this.retrieve(),this._object=null},e.prototype.retrieve=function(){this._object=null},e.prototype.initData=function(t){void 0===t&&(t=null)},e.prototype.initObject=function(t){this._object=t},e.prototype.getObject=function(t){return this._object},e}(i);t.BaseComponent=n,__reflect(n.prototype,"component.BaseComponent",["face.IPoolObject"])}(component||(component={}));var gameTool;!function(t){var e=function(){function t(t,e){void 0===e&&(e=null),this._key=t.prototype.__class__,this._cl=t,this._initObj=e}return t.prototype.getKey=function(){return this._key},t.prototype.setKey=function(t){this._key=t},t.prototype.getCl=function(){return this._cl},Object.defineProperty(t.prototype,"setCl",{set:function(t){this._cl=t},enumerable:!0,configurable:!0}),t.prototype.getInitObj=function(){return this._initObj},t.prototype.setInitObj=function(t){this._initObj=t},t}();t.ListData=e,__reflect(e.prototype,"gameTool.ListData")}(gameTool||(gameTool={}));var gameTool;!function(t){var e=function(){function t(t,e){void 0===e&&(e=null),this._arr=[],this._list=[],this._classRef=t,this._initObj=e}return t.prototype.dispose=function(){this._list=null,this._arr=null,this._classRef=null,this._initObj=null},t.prototype.getFreeObj=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i;return this._arr.length<=0&&(i=new this._classRef,this._arr.push(i)),i=this._arr.pop(),this._list.push(i),definiton.hasProperty(i,"initData")&&(i.initData.apply(i,t),i.hasInit=!0),i},t.prototype.retrieve=function(t){var e=this._list.indexOf(t);-1!=e&&this._list.splice(e,1),e=this._arr.indexOf(t),-1==e&&(definiton.hasProperty(t,"retrieve")&&(t.retrieve(),t.hasInit=!1),this._arr.push(t))},t.prototype.getList=function(){return this._list},t.prototype.getClassRef=function(){return this._classRef},t.prototype.removePool=function(){for(;this._list.length;)this.retrieve(this._list.pop())},t.prototype.clearPool=function(){for(this.removePool();this._arr.length;){var t=this._arr.pop();definiton.hasProperty(t,"dispose")&&t.dispose()}},t}();t.GamePool=e,__reflect(e.prototype,"gameTool.GamePool")}(gameTool||(gameTool={}));var audio1;!function(t){function e(t,e){h(p).play(t,e)}function i(){h(p).pause()}function n(t){h(p).setMusicUrl(t)}function o(t,e){h(p).setLoaded(t,e)}function r(t,e){h(p).setComplete(t,e)}function s(){return h(p).running}function a(t){h(p).loop=t}function u(){return h(p).currentTime}function c(t){h(p).currentTime=t}function l(){return h(p).endTime}var h=gameTool.singleton,p=function(){function t(){var t=this;window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,this._ac=new window.AudioContext,this._loaded=new FunctionInfo,this._complete=new FunctionInfo,this._audio=document.createElement("audio"),this._audio.setAttribute("id","__music__"),this._audio.crossOrigin="anonymous",document.head.appendChild(this._audio),this._analyser=this._ac.createAnalyser(),this._gainnode=this._ac.createGain(),this._gainnode.gain.value=1;var e=this._ac.createMediaElementSource(this._audio);this._processor=this._ac.createScriptProcessor(1024),this._processor.connect(this._ac.destination),this._analyser.connect(this._processor),e.connect(this._analyser),e.connect(this._ac.destination),this._processor.onaudioprocess=function(){0!=t._endTime&&t._running&&t._audio.currentTime>=t._endTime&&(t._loop?t.play(t._startTime,t._endTime):t.pause(),t._complete.fun&&t._complete.call())},this._audio.addEventListener("loadeddata",function(){t._totalTime=t._audio.duration,0==t._endTime&&(t._endTime=t._totalTime),t._loaded.args=[t._totalTime],t._loaded.fun&&t._loaded.call()})}return t.prototype.play=function(t,e){var i=this,n=setTimeout(function(){clearTimeout(n),i._audio.currentTime=t,i._audio.play(),i._running=!0,i._startTime=t,0==e?i._endTime=0==i._totalTime?0:i._totalTime:i._endTime=e},200)},t.prototype.pause=function(){this._running=!1,this._audio.pause()},t.prototype.setMusicUrl=function(t){this._endTime=0,this._totalTime=0,this._audio.src=t,this._audio.load()},t.prototype.setLoaded=function(t,e){this._loaded.fun=t,this._loaded.context=e},t.prototype.setComplete=function(t,e){this._complete.fun=t,this._complete.context=e},Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._audio.currentTime},set:function(t){this._audio.currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._endTime},enumerable:!0,configurable:!0}),t}();t.Music=p,__reflect(p.prototype,"audio1.Music"),t.play=e,t.pause=i,t.setMusicUrl=n,t.setLoaded=o,t.setComplete=r,t.isRunning=s,t.setLoop=a,t.getCurrentTime=u,t.setCurrentTime=c,t.getEndTime=l}(audio1||(audio1={}));var audio;!function(t){function e(t,e){h(p).play(t,e)}function i(){h(p).pause()}function n(t){h(p).setMusicUrl(t)}function o(t,e){h(p).setLoaded(t,e)}function r(t,e){h(p).setComplete(t,e)}function s(){return h(p).running}function a(t){h(p).loop=t}function u(){return h(p).currentTime}function c(t){h(p).currentTime=t}function l(){return h(p).endTime}var h=gameTool.singleton,p=function(){function t(){var t=this;console.log("audio1"),window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,this._ac=new window.AudioContext,this._loaded=new FunctionInfo,this._complete=new FunctionInfo,this._audio=document.createElement("audio"),this._audio.setAttribute("id","__music__"),this._audio.crossOrigin="anonymous",document.body.appendChild(this._audio),this._audio.onloadeddata=function(){console.log("onloadeddata"),t._totalTime=t._audio.duration,0==t._endTime&&(t._endTime=t._totalTime),t._loaded.args=[t._totalTime],t._loaded.fun&&t._loaded.call()},console.log("audio2"),console.log("audio3")}return t.prototype.play=function(t,e){var i=this,n=setTimeout(function(){clearTimeout(n),i._audio.currentTime=t,i._audio.play(),i._running=!0,i._startTime=t,0==e?i._endTime=0==i._totalTime?0:i._totalTime:i._endTime=e,i._timeID=egret.setInterval(function(){0!=i._endTime&&i._running&&i._audio.currentTime>=i._endTime&&(i._loop?i.play(i._startTime,i._endTime):i.pause(),i._complete.fun&&i._complete.call())},i,200)},200)},t.prototype.pause=function(){this._running=!1,this._audio.pause(),egret.clearInterval(this._timeID)},t.prototype.setMusicUrl=function(t){this._endTime=0,this._totalTime=0,this._audio.src=t,t&&""!=t&&(this._audio.load(),console.log("设置音频地址"))},t.prototype.setLoaded=function(t,e){this._loaded.fun=t,this._loaded.context=e},t.prototype.setComplete=function(t,e){this._complete.fun=t,this._complete.context=e},Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._audio.currentTime},set:function(t){this._audio.currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._endTime},enumerable:!0,configurable:!0}),t}();t.Music=p,__reflect(p.prototype,"audio.Music"),t.play=e,t.pause=i,t.setMusicUrl=n,t.setLoaded=o,t.setComplete=r,t.isRunning=s,t.setLoop=a,t.getCurrentTime=u,t.setCurrentTime=c,t.getEndTime=l}(audio||(audio={}));var music;!function(t){function e(){f(_).init()}function i(t,e){f(_).play(t,e)}function n(){f(_).pause()}function o(){f(_).dispose()}function r(t){f(_).setMusicUrl(t)}function s(t,e){f(_).setLoaded(t,e)}function a(t,e){f(_).setComplete(t,e)}function u(){return f(_).running}function c(t){f(_).loop=t}function l(){return f(_).currentTime}function h(t){f(_).currentTime=t}function p(t){f(_).startTime=t}function d(){return f(_).endTime}var f=gameTool.singleton,_=function(){function t(){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,this.init()}return t.prototype.dispose=function(){this.pause(),this._ac.close(),this._ac=null,this._buffer=null,this._sourceNode=null},t.prototype.init=function(){this._ac=new window.AudioContext,this._loaded=new FunctionInfo,this._complete=new FunctionInfo,this._analyser=this._ac.createAnalyser(),this._gainnode=this._ac.createGain()},t.prototype.play=function(t,e){var i=this;this.pauseMusic(),this._pauseTime&&(this._acStartTime+=this._ac.currentTime-this._pauseTime,this._pauseTime=0),this._isPause=!1,this._sourceNode=this._ac.createBufferSource(),this._sourceNode.connect(this._analyser),this._analyser.connect(this._gainnode),this._gainnode.connect(this._ac.destination),this._sourceNode.buffer=this._buffer,this._running=!0,0==e?this._sourceNode.start(0,t):this._sourceNode.start(0,t,e-t),this._sourceNode.onended=function(t){i._complete.fun&&i._complete.call()}},t.prototype.pause=function(){this._pauseTime=this._ac.currentTime,this._isPause=!0,this._running=!1,this._currentTime=this._ac.currentTime,this.pauseMusic(),this._sourceNode=null},t.prototype.setMusicUrl=function(t){var e=this;this._endTime=0,this._totalTime=0;var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){e._startTime=0,e._ac.decodeAudioData(i.response,function(t){e._buffer=t,e._totalTime=e._buffer.duration,0==e._endTime&&(e._endTime=e._totalTime),e._loaded.args=[e._totalTime],e._acStartTime=e._ac.currentTime,e._pauseTime=0,e._loaded.fun&&e._loaded.call()},e.onError)},i.onerror=function(t){console.log(t)},i.upload.addEventListener("error",function(t){console.log(t)}),i.send()},t.prototype.setLoaded=function(t,e){this._loaded.fun=t,this._loaded.context=e},t.prototype.setComplete=function(t,e){this._complete.fun=t,this._complete.context=e},t.prototype.onError=function(t){console.log(t)},t.prototype.pauseMusic=function(){this._sourceNode&&this._sourceNode.stop(),this._sourceNode&&(this._sourceNode.disconnect(this._analyser),this._analyser.disconnect(this._gainnode),this._gainnode.disconnect(this._ac.destination))},Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._isPause?this._currentTime:this._startTime+this._ac.currentTime-this._acStartTime},set:function(t){this._currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{set:function(t){this._startTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._endTime},enumerable:!0,configurable:!0}),t}();t.Music=_,__reflect(_.prototype,"music.Music"),t.init=e,t.play=i,t.pause=n,t.dispose=o,t.setMusicUrl=r,t.setLoaded=s,t.setComplete=a,t.isRunning=u,t.setLoop=c,t.getCurrentTime=l,t.setCurrentTime=h,t.setStartTime=p,t.getEndTime=d
}(music||(music={}));var music_test;!function(t){function e(t,e){p(d).play(t,e)}function i(){p(d).pause()}function n(){p(d).dispose()}function o(t){p(d).setMusicUrl(t)}function r(t,e){p(d).setLoaded(t,e)}function s(t,e){p(d).setComplete(t,e)}function a(){return p(d).running}function u(t){p(d).loop=t}function c(){return p(d).currentTime}function l(t){p(d).currentTime=t}function h(){return p(d).endTime}var p=gameTool.singleton,d=function(){function t(){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,this.init()}return t.prototype.dispose=function(){this._ac.close(),this._ac=null,this._buffer=null,this._sourceNode=null,this._resList=null},t.prototype.init=function(){this._resList={},this._ac=new window.AudioContext,this._loaded=new FunctionInfo,this._complete=new FunctionInfo,this._gainnode=this._ac.createGain(),this._gainnode.gain.value=1},t.prototype.play=function(t,e){var i=this;this._pauseTime&&(this._acStartTime+=this._ac.currentTime-this._pauseTime,this._pauseTime=0),this._isPause=!1,this._sourceNode=this._ac.createBufferSource(),this._sourceNode.buffer=this._buffer;var n=this._ac.destination;this._sourceNode.connect(n),this._sourceNode.start(0),console.log(this._sourceNode),this._sourceNode.onended=function(t){tip.showTextTip("播放完毕"),i._complete.fun&&i._complete.call()}},t.prototype.pause=function(){if(this._pauseTime=this._ac.currentTime,this._isPause=!0,this._running=!1,this._currentTime=this._ac.currentTime,this._sourceNode&&"stop"in this._sourceNode)try{this._sourceNode.stop()}catch(t){console.log(t)}if(this._sourceNode)try{this._sourceNode.disconnect(this._analyser),this._analyser.disconnect(this._gainnode),this._gainnode.disconnect(this._ac.destination)}catch(t){console.log(t)}this._sourceNode=null},t.prototype.setMusicUrl=function(t){var e=this;if(this._endTime=0,this._totalTime=0,this._resList[t])this.getBuffer(this._resList[t]);else{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){e._ac.decodeAudioData(i.response,function(i){e.getBuffer(i),e._resList[t]=i},e.onError)},i.onerror=function(t){console.log(t)},i.upload.addEventListener("error",function(t){console.log(t)}),i.send()}},t.prototype.setLoaded=function(t,e){this._loaded.fun=t,this._loaded.context=e},t.prototype.setComplete=function(t,e){this._complete.fun=t,this._complete.context=e},t.prototype.getBuffer=function(t){this._buffer=t,this._totalTime=this._buffer.duration,0==this._endTime&&(this._endTime=this._totalTime),this._loaded.args=[this._totalTime],this._acStartTime=this._ac.currentTime,this._pauseTime=0,this._loaded.fun&&this._loaded.call()},t.prototype.onError=function(t){console.log(t)},Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._isPause?this._currentTime:this._ac.currentTime-this._acStartTime},set:function(t){this._currentTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return this._endTime},enumerable:!0,configurable:!0}),t}();t.Music=d,__reflect(d.prototype,"music_test.Music"),t.play=e,t.pause=i,t.dispose=n,t.setMusicUrl=o,t.setLoaded=r,t.setComplete=s,t.isRunning=a,t.setLoop=u,t.getCurrentTime=c,t.setCurrentTime=l,t.getEndTime=h}(music_test||(music_test={}));var video;!function(t){function e(t,e){l(h).play(t,e)}function i(){l(h).pause()}function n(t){l(h).setMusicUrl(t)}function o(t,e){l(h).setLoaded(t,e)}function r(t,e){l(h).setComplete(t,e)}function s(){return l(h).running}function a(t){l(h).loop=t}function u(){return l(h).currentTime}function c(t){l(h).currentTime=t}var l=gameTool.singleton,h=function(){function t(){var t=this;window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,this._ac=new window.AudioContext,this._loaded=new FunctionInfo,this._complete=new FunctionInfo,this._audio=document.createElement("video"),this._audio.setAttribute("id","__music__"),this._audio.setAttribute("style","visibility:hidden"),this._audio.setAttribute("webkit-playsinline","true"),this._audio.setAttribute("playsinline","true"),this._audio.controls=!1,this._audio.autoplay=!1,this._audio.crossOrigin="anonymous",document.head.appendChild(this._audio),this._analyser=this._ac.createAnalyser(),this._gainnode=this._ac.createGain(),this._gainnode.gain.value=1;var e=this._ac.createMediaElementSource(this._audio);this._processor=this._ac.createScriptProcessor(1024),this._processor.connect(this._ac.destination),this._analyser.connect(this._processor),e.connect(this._analyser),e.connect(this._ac.destination),this._processor.onaudioprocess=function(){0!=t._endTime&&t._running&&t._audio.currentTime>=t._endTime&&(t._loop?t.play(t._startTime,t._endTime):t.pause(),t._complete.fun&&t._complete.call())},this._audio.addEventListener("loadeddata",function(){t._totalTime=t._audio.duration,0==t._endTime&&(t._endTime=t._totalTime),t._loaded.args=[t._totalTime],t._loaded.fun&&t._loaded.call()})}return t.prototype.play=function(t,e){var i=this,n=setTimeout(function(){clearTimeout(n),i._audio.currentTime=t,i._audio.play(),i._running=!0,i._startTime=t,0==e?i._endTime=0==i._totalTime?0:i._totalTime:i._endTime=e},200)},t.prototype.pause=function(){this._running=!1,this._audio.pause()},t.prototype.setMusicUrl=function(t){this._endTime=0,this._totalTime=0,this._audio.src=t,this._audio.load()},t.prototype.setLoaded=function(t,e){this._loaded.fun=t,this._loaded.context=e},t.prototype.setComplete=function(t,e){this._complete.fun=t,this._complete.context=e},Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._audio.currentTime},set:function(t){this._audio.currentTime=t},enumerable:!0,configurable:!0}),t}();t.Music=h,__reflect(h.prototype,"video.Music"),t.play=e,t.pause=i,t.setMusicUrl=n,t.setLoaded=o,t.setComplete=r,t.isRunning=s,t.setLoop=a,t.getCurrentTime=u,t.setCurrentTime=c}(video||(video={}));var notification;!function(t){function e(t,e,i,n){void 0===n&&(n=0),gameTool.singleton(r).addListener(t,e,i,n)}function i(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=[t].concat(e);gameTool.singleton(r).dispatchListener.apply(gameTool.singleton(r),n)}function n(t,e,i){gameTool.singleton(r).removeListener(t,e,i)}function o(t){gameTool.singleton(r).removeListenerByObject(t)}var r=function(){function t(){this._listenerNames={}}return t.prototype.addListener=function(t,e,i,n){void 0===n&&(n=0),this._listenerNames.hasOwnProperty(t)||(this._listenerNames[t]={});var o=gameTool.getTypeId(i),r=this._listenerNames[t];r.hasOwnProperty(o)||(r[o]=[]);var s={name:t,sender:e,priority:n,context:i},a=r[o];return a.push(s),r[o]=a.sort(function(t,e){return e.priority-t.priority}),s},t.prototype.hasListener=function(t,e,i){if(!this._listenerNames.hasOwnProperty(t))return!1;var n=this._listenerNames[t],o=gameTool.getTypeId(i);if(!n.hasOwnProperty(o))return!1;for(var r=n[o],s=r.length,a=0;s>a;a++)if(r[a].sender==e)return!0;return!1},t.prototype.removeListener=function(t,e,i){var n=this._listenerNames[t];for(var o in n)for(var r=n[o],s=r.length,a=0;s>a;a++){var u=r[a];if(u.sender==e&&u.context==i)return void r.splice(a,1)}},t.prototype.removeListenerByObject=function(t){var e=gameTool.hasTypeId(t);if(e)for(var i in this._listenerNames){var n=this._listenerNames[i];n.hasOwnProperty(e)&&delete n[e]}},t.prototype.dispatchListener=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this._listenerNames[t];if(n){var o=[];for(var r in n){var s=n[r];o=o.concat(s)}o.sort(function(t,e){return e.priority-t.priority});for(var a=o.length,u=0;a>u;u++){var c=o[u];c.sender.apply(c.context,e)}}},t}();t.Notification=r,__reflect(r.prototype,"notification.Notification"),t.addNotification=e,t.postNotification=i,t.removeNotification=n,t.removeNotificationByObject=o}(notification||(notification={}));var define;!function(t){var e=function(){function t(){}return t.ERROR=1e4,t.USER_INFO=100,t}();t.Data=e,__reflect(e.prototype,"define.Data")}(define||(define={}));var alert;!function(t){function e(t,e,n,o){void 0===e&&(e=1),void 0===n&&(n=null),void 0===o&&(o=null);for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];var a=new(i.bind.apply(i,[void 0,t,e,n,o].concat(r)));return gui.addBox(a),a}var i=function(t){function e(e,i,n,o){void 0===i&&(i=1),void 0===n&&(n=null),void 0===o&&(o=null);for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];var a=t.call(this)||this;return a._buttons=0,a._message=e,a._buttons=i,null!=n&&(a._callback=gameTool.poolList.getInstance(FunctionInfo),a._callback.fun=n,a._callback.context=o,a._callback.args=r),a._content&&(a._content.text=a._message),a}return __extends(e,t),e.prototype.initView=function(){this._ui=fairygui.UIPackage.createObject("common","alerView").asCom,this.addChild(this._ui),this._buttonNumController=this._ui.getController("select"),this._content=this._ui.getChild("txt").asTextField,this._buttons==e.OK?this._buttonNumController.selectedPage="1":this._buttonNumController.selectedPage="2",this._content.text=this._message},e.prototype.onClick=function(i){switch(t.prototype.onClick.call(this,i),i.currentTarget.name){case"okBtn":case"okBtn1":null!=this._callback&&(this._callback.args=[e.OK].concat(this._callback.args),this._callback.call()),this.dispose();break;case"cancelBtn":null!=this._callback&&(this._callback.args=[e.CANCEL].concat(this._callback.args),this._callback.call()),this.dispose()}},e.prototype.dispose=function(){null!=this._callback&&(gameTool.poolList.remove(this._callback),this._callback=null),t.prototype.dispose.call(this)},e.OK=1,e.CANCEL=2,e.OK_CANCEL=3,e}(gui.BaseWindow);t.Alert=i,__reflect(i.prototype,"alert.Alert"),t.createAlert=e}(alert||(alert={}));var gui;!function(t){function e(t,e){gameTool.singleton(n).bindGuiProperty(t,e)}function i(t){gameTool.singleton(n).removeBindGuiProperty(t)}var n=function(){function t(){this._keys={}}return t.prototype.bindGuiProperty=function(t,e){var i=e.numChildren,n=gameTool.getTypeId(t);null==this._keys[n]&&(this._keys[n]=[]);for(var o=0;i>o;o++){var r=e.getChildAt(o),s=r.name;definiton.hasProperty(t,s)||s.match(/^n[0-9]+$/g)||(t[s]=r,this._keys[n].push(s))}},t.prototype.removeBindGuiProperty=function(t){var e=gameTool.getTypeId(t);if(this._keys[e]){for(var i=this._keys[e].length,n=0;i>n;n++)t[this._keys[e][n]]=null,delete t[this._keys[e][n]];this._keys[e]=null,delete this._keys[e]}},t}();t.BindProperty=n,__reflect(n.prototype,"gui.BindProperty"),t.bindGuiProperty=e,t.removeBindGuiProperty=i}(gui||(gui={}));var gui;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._imgLoader=new egret.ImageLoader,e._imgLoader.crossOrigin="anonymous",e._imgLoader.addEventListener(egret.Event.COMPLETE,e.imgLoadHandler,e),e}return __extends(e,t),e.prototype.dispose=function(){this._imgLoader.removeEventListener(egret.Event.COMPLETE,this.imgLoadHandler,this),this._imgLoader.data=null,this._imgLoader=null,this._complete=null,this._context=null},e.prototype.getImgByUrl=function(t,e,i){-1!=t.indexOf("http")&&(this._imgLoader.load(t),this._complete=e,this._context=i)},e.prototype.imgLoadHandler=function(t){var e=t.currentTarget,i=e.data;this.bitmapData=i,this._complete&&this._complete.call(this._context)},e}(egret.Bitmap);t.BitmapImage=e,__reflect(e.prototype,"gui.BitmapImage")}(gui||(gui={}));var gui;!function(t){var e=function(){function e(e,n,o){this._oList=e,this._list=new t.GListBase(e,n,o,i,this.itemRenderer,this),this.clear()}return e.prototype.addText=function(t){this._texts.push(t),this._list.numItems=this._texts.length,this._oList.scrollToView(this._texts.length-1)},e.prototype.clear=function(){this._texts=[],this._list.numItems=this._texts.length},e.prototype.itemRenderer=function(t,e){e.setListIndex(t,this._texts[t])},e}();t.ConsoleList=e,__reflect(e.prototype,"gui.ConsoleList");var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this)},e.prototype.setListIndex=function(t,e){this._listIndex=t,this.getChild("text").text=e},e}(fairygui.GComponent);t.ConsoleItem=i,__reflect(i.prototype,"gui.ConsoleItem")}(gui||(gui={}));var filter_lib;!function(t){t.jianying=new egret.ColorMatrixFilter([1,0,0,0,-255,0,1,0,0,-255,0,0,1,0,-255,0,0,0,1,0])}(filter_lib||(filter_lib={}));var gui;!function(t){var e=function(){function t(t,e,i,n,o,r){fairygui.UIObjectFactory.setPackageItemExtension(fairygui.UIPackage.getItemURL(e,i),n),this._list=t,this._list.itemRenderer=o,this._list.callbackThisObj=r,this._callbackThisObj=r,this._type=n}return t.prototype.dispose=function(){notification.removeNotificationByObject(this),this._list.removeEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this),this._list=null,this._type=null,this._itemClick=null},t.prototype.onItemClick=function(t){var e=t.itemObject;this._itemClick.call(this._callbackThisObj,e)},Object.defineProperty(t.prototype,"itemClick",{set:function(t){this._itemClick=t,t?this._list.addEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this):this._list.removeEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{set:function(t){this._list.numItems=t},enumerable:!0,configurable:!0}),t}();t.GListBase=e,__reflect(e.prototype,"gui.GListBase")}(gui||(gui={}));var gui;!function(t){var e=function(){function t(t,e){this._text0=t,this._text1=e,this._text1.addEventListener(egret.Event.CHANGE,this.onTextChange,this)}return t.prototype.dispose=function(){this._text1.removeEventListener(egret.Event.CHANGE,this.onTextChange,this),this._text0=null,this._text1=null},t.prototype.update=function(){this._text0.visible=""==this._text1.text},t.prototype.onTextChange=function(){this._text0.visible=""==this._text1.text},t}();t.InputText=e,__reflect(e.prototype,"gui.InputText")}(gui||(gui={}));var gui;!function(t){var e=function(){function e(e){this._com=e,t.bindGuiProperty(this,e),this._buttonList=[],this._textList=[],this._winList=[],this.registerButtons(this._com),this.registerTexts(this._com)}return e.prototype.dispose=function(){t.removeBindGuiProperty(this),notification.removeNotificationByObject(this);for(var e=this._buttonList.length,i=0;e>i;i++)this._buttonList[i].removeClickListener(this.onClick,this),this._buttonList[i].dispose();e=this._textList.length;for(var i=0;e>i;i++)this._textList[i].dispose();e=this._winList.length;for(var i=0;e>i;i++)this._winList[0].dispose();this._com.dispose(),this._com=null,this._buttonList=null,this._textList=null,this._winList=null},e.prototype.update=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.setText=function(t,e){this._textList[t].text=e.toString()},e.prototype.getText=function(t){return this._textList[t].text},e.prototype.getTextFiled=function(t){return this._textList[t]},e.prototype.clickByName=function(t){},e.prototype.getComponent=function(t){return this._com.getChild(t)},e.prototype.onClick=function(t){t.stopImmediatePropagation(),this.clickByName(t.target.name);var e=t.currentTarget.name,i="btn",n=e.indexOf(i);0>n||(n=parseInt(e.substr(i.length)),this.clickHandler(n))},e.prototype.clickHandler=function(t){},e.prototype.registerButtons=function(t){for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n instanceof fairygui.GButton&&this.getButton(n.name)}},e.prototype.registerTexts=function(t){if(null==t)throw new Error("窗口不存在，不能注册文本").message;for(var e=t.numChildren,i=0;e>i;i++){var n=t.getChildAt(i);n instanceof fairygui.GTextField&&n.name.indexOf("text")>-1&&this._textList.push(n)}this._textList.sort(this.onTextSort)},e.prototype.getButton=function(t){var e;return e=this.getComponent(t),this._buttonList.indexOf(e)>=0?e:(this._buttonList.push(e),e.addClickListener(this.onClick,this),e)},e.prototype.onTextSort=function(t,e){var i=parseInt(t.name.substr(4)),n=parseInt(e.name.substr(4));return n>i?-1:i>n?1:0},e}();t.ItemViewBase=e,__reflect(e.prototype,"gui.ItemViewBase")}(gui||(gui={}));var define;!function(t){var e=function(){function t(){}return t.NONE=0,t.NORMAL=1,t}();t.LoadUIType=e,__reflect(e.prototype,"define.LoadUIType")}(define||(define={}));var loadUI;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0);var o=t.call(this,"load_ui",e,i,n)||this;return o.uiType=define.UITypeDefine.NONE,o}return __extends(e,t),e.prototype.open=function(e){t.prototype.open.call(this,e)},e.prototype.setProgress=function(t,e){},e}(gui.OvBase);t.BaseLoadingUI=e,__reflect(e.prototype,"loadUI.BaseLoadingUI",["loadUI.ILoadUI"])}(loadUI||(loadUI={}));var FunctionInfo=function(){function t(){}return t.prototype.dispose=function(){this.fun=null,this.context=null,this.args=null},t.prototype.call=function(){this.sleep||("string"==typeof this.fun?this.context[this.fun]=this.args?this.args[0]:null:this.fun.apply(this.context,this.args))},t.prototype.onceCall=function(){this.call(),gameTool.poolList.remove(this),this.dispose()},t}();__reflect(FunctionInfo.prototype,"FunctionInfo");var gui;!function(t){var e=function(){function t(t,e,i,n,o,r,s){this._currentPage=0,this._totalPage=0,this._pageNum=0,this._length=0,this._com=t,fairygui.UIObjectFactory.setPackageItemExtension(fairygui.UIPackage.getItemURL(e,i),n),this._list=this._com.getChild("list").asList,this._preBtn=this._com.getChild("prevBtn").asButton,this._nextBtn=this._com.getChild("nextBtn").asButton,null!=this._com.getChild("pageTxt")&&(this._pageText=this._com.getChild("pageTxt").asTextField),this._itemRenderer=o,this._callbackThisObj=s,this._list.itemRenderer=this.itemRenderer,this._list.callbackThisObj=this,this._type=n,this._preBtn.addClickListener(this.onPre,this),this._nextBtn.addClickListener(this.onNext,this),this._currentPage=1,this._onTurnPage=r}return t.prototype.dispose=function(){this._list.removeEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this),this._preBtn.removeClickListener(this.onPre,this),this._nextBtn.removeClickListener(this.onNext,this),this._com.dispose(),this._com=null,this._list=null,this._type=null,this._itemClick=null,this._onTurnPage=null,this._itemRenderer=null,this._callbackThisObj=null},t.prototype.onPageChange=function(){this._currentPage>this._totalPage&&(this._currentPage=1),this._preBtn.enabled=this._currentPage>1,this._nextBtn.enabled=this._currentPage<this._totalPage,this._pageText&&(this._pageText.text=String(this._currentPage)+"/"+this._totalPage),this.numItems=this._pageNum,this._onTurnPage.call(this._callbackThisObj)},t.prototype.onItemClick=function(t){var e=t.itemObject;this._itemClick.call(this._callbackThisObj,e)},t.prototype.onPre=function(){this._currentPage--,this.onPageChange()},t.prototype.onNext=function(){this._currentPage++,this.onPageChange()},t.prototype.itemRenderer=function(t,e){this._itemRenderer.call(this._callbackThisObj,t,(this._currentPage-1)*this._pageNum+t,e)},Object.defineProperty(t.prototype,"itemClick",{set:function(t){this._itemClick=t,t?this._list.addEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this):this._list.removeEventListener(fairygui.ItemEvent.CLICK,this.onItemClick,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{set:function(t){this._length=t,0==this._length?this._totalPage=1:this._totalPage=Math.floor((this._length-1)/this._pageNum+1),this.onPageChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{set:function(t){this._list.numItems=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){this._currentPage=t,this.onPageChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalPage",{get:function(){return this._totalPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageNum",{get:function(){return this._pageNum},set:function(t){this._pageNum=t},enumerable:!0,configurable:!0}),t}();t.PageTurn=e,__reflect(e.prototype,"gui.PageTurn")}(gui||(gui={}));var gui;!function(t){var e=function(){function t(t,e,i,o,r,s){void 0===s&&(s=1e3),this._show_num=2,this._length=0,this._sIndex=0,this._lIndex=0,this._com=t,this._pkgName=i,this._resName=o,this._show_num=e,this._container=new fairygui.GComponent,this._com.addChild(this._container),fairygui.UIObjectFactory.setPackageItemExtension(fairygui.UIPackage.getItemURL(i,o),r),this._render=new n,this._time=s}return t.prototype.dispose=function(){return this._running=!1,delay.hasDelayMain(this)?void delay.addDelayTransact(this,this.dispose):(this.clearTypes(),this._com=null,this._render=null,void(this._container=null))},t.prototype.clearTypes=function(){if(this._types){for(var t=this._types.length,e=0;t>e;e++)this._types[e].dispose();this._types=null}},t.prototype.draw=function(){if(this._types=[],this._length>this._show_num){for(var t=this._show_num+1,e=0;t>e;e++){var i=fairygui.UIPackage.createObject(this._pkgName,this._resName);this._container.addChild(i);var n=this._render.getPosition(e);i.x=n.x,i.y=n.y,i.setListIndex(e),this._types.push(i)}this._sIndex=0,this._lIndex=this._show_num,this._running=!0,this.startScroll()}else for(var t=this._length,e=0;t>e;e++){var i=fairygui.UIPackage.createObject(this._pkgName,this._resName);this._container.addChild(i);var n=this._render.getPosition(e);i.x=n.x,i.y=n.y,i.setListIndex(e),this._types.push(i)}},t.prototype.start=function(){this._running=!0,this.next()},t.prototype.stop=function(){this._running=!1},t.prototype.startScroll=function(){this._sIndex--,delay.createDelayMain(this);var t=this._render.getPosition(this._sIndex);egret.Tween.get(this._container).to(t,this._time).call(this.next,this)},t.prototype.next=function(){this._lIndex++;var t=this._types.shift(),e=this._render.getPosition(this._lIndex);t.x=e.x,t.y=e.y;var i=++this._types[this._types.length-1].listIndex;i>=this._length&&(i=0),t.setListIndex(i),this._types.push(t),delay.executeAllTransact(this),this._running&&this.startScroll()},Object.defineProperty(t.prototype,"length",{set:function(t){return delay.hasDelayMain(this)?void delay.addDelayTransact(this,"length",t):void(this._length!=t&&(0==this._length?(this._length=t,this.draw()):this._length<=this._show_num?(this.clearTypes(),this._length=t,this.draw()):(this._length=t,this._length<=this._show_num&&(this.clearTypes(),this.draw()))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"render",{get:function(){return this._render},enumerable:!0,configurable:!0}),t}();t.ScrollPanel=e,__reflect(e.prototype,"gui.ScrollPanel");var i=function(t){function e(){var e=t.call(this)||this;return delay.createDelayMain(e),e}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.constructFromResource=function(){t.prototype.constructFromResource.call(this),delay.executeAllTransact(this)},e.prototype.setListIndex=function(t){return this.listIndex=t,delay.hasDelayMain(this)?void delay.addDelayTransact(this,this.change):void this.change()},e.prototype.change=function(){},e}(fairygui.GComponent);t.ScrollItem=i,__reflect(i.prototype,"gui.ScrollItem");var n=function(){function t(){}return t.prototype.getPosition=function(t){return{x:0,y:this.tap*t}},t}();t.ScrollRender=n,__reflect(n.prototype,"gui.ScrollRender")}(gui||(gui={}));var gui;!function(t){var e=function(){function t(t,e,i){this._minNum=0,this._maxNum=0,this._rate=1,this._showRate=1,this._com=t,this._slider=this._com.getChild("slider").asSlider,this._prevBtn=this._com.getChild("prev").asButton,this._nextBtn=this._com.getChild("next").asButton,this._com.getChild("text").asTextField&&(this._text=this._com.getChild("text").asTextField,this._text.text=this._slider.value.toString()),this._prevBtn.addClickListener(this.onPrev,this),this._nextBtn.addClickListener(this.onNext,this),this._slider.addEventListener(fairygui.StateChangeEvent.CHANGED,this.onChange,this),this._changeFun=e,this._changeContext=i}return t.prototype.dispose=function(){this._slider.removeEventListener(fairygui.StateChangeEvent.CHANGED,this.onChange,this),this._prevBtn.removeClickListener(this.onPrev,this),this._nextBtn.removeClickListener(this.onNext,this),this._com=null,this._slider=null,this._prevBtn=null,this._nextBtn=null,this._text=null,this._changeFun=null,this._changeContext=null},t.prototype.onPrev=function(){this._slider.value>0&&(this._slider.value--,this._slider.update(),this.onChange())},t.prototype.onNext=function(){this._slider.value<this._slider.max&&(this._slider.value++,this._slider.update(),this.onChange())},t.prototype.onChange=function(){this._changeFun&&this._changeFun.apply(this._changeContext),this.refreshText()},t.prototype.mathValues=function(){this._slider.max=(this._maxNum-this._minNum)/this.rate},t.prototype.refreshText=function(){this._text&&(this._text.text=(this._slider.value*this.rate/this.showRate+this._minNum/this.showRate).toString()),this._prevBtn.enabled=this._slider.value>0,this._nextBtn.enabled=this._slider.value<this._slider.max},Object.defineProperty(t.prototype,"max",{get:function(){return this._slider.max},set:function(t){this.maxNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._slider.value*this.rate+this._minNum},set:function(t){this._slider.value=(t-this._minNum)/this.rate,this.onChange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minNum",{get:function(){return this._minNum},set:function(t){this._minNum=t,this.mathValues()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxNum",{get:function(){return this._maxNum},set:function(t){this._maxNum=t,this.mathValues()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rate",{get:function(){return this._rate},set:function(t){this._rate=t,this.mathValues()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showRate",{get:function(){return this._showRate},set:function(t){this._showRate=t,this.mathValues()},enumerable:!0,configurable:!0}),t}();t.Slider=e,__reflect(e.prototype,"gui.Slider")}(gui||(gui={}));var tip;!function(t){function e(t,e){void 0===e&&(e=null),i(o).showTextTip(t,e)}var i=gameTool.singleton,n=function(t){function e(e){var i=t.call(this)||this;return i._message=e,i.initView(),i.touchEnabled=!1,i}return __extends(e,t),e.prototype.initView=function(){this._ui=fairygui.UIPackage.createObject("common","tip").asCom,this.addChild(this._ui.displayObject),this._content=this._ui.getChild("content").asTextField,this._content.text=this._message},e.prototype.startScroll=function(){setTimeout(this.dispose.bind(this),1e3)},e.prototype.dispose=function(){this.dispatchEvent(new egret.Event(egret.Event.CLOSE)),t.prototype.dispose.call(this)},e}(extendsUI.BaseContainer);t.TipItem=n,__reflect(n.prototype,"tip.TipItem");var o=function(){function t(){this.GAME_TIP_START_Y=150,this._textTipCurrentY=gameTool.stage.stageHeight/2-this.GAME_TIP_START_Y,this._itemList=[]}return t.prototype.showTextTip=function(t,e){void 0===e&&(e=null);var i=new n(t);i.x=(gameTool.stage.stageWidth-i.width)/2,i.y=this._textTipCurrentY,null==e?gui.addDisplayToStage(i,define.WindowType.TIP_LAYER):(i.x=0,e.addChild(i)),i.startScroll(),this._textTipCurrentY+=80,this._itemList.push(i),i.addEventListener(egret.Event.CLOSE,this.onGameTipClose,this)},t.prototype.onGameTipClose=function(t){var e=t.currentTarget,i=this._itemList.indexOf(e);e.removeEventListener(egret.Event.CLOSE,this.onGameTipClose,this),i>=0&&this._itemList.splice(i,1),0==this._itemList.length&&(this._textTipCurrentY=gameTool.stage.stageHeight/2-this.GAME_TIP_START_Y)},t}();t.TipManager=o,__reflect(o.prototype,"tip.TipManager"),t.showTextTip=e}(tip||(tip={}));var gui;!function(t){var e=function(){function t(){}return t.prototype.show=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.inClose=!1,t.apply(e,i)},t.prototype.close=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.inClose=!0,t.apply(e,i)},t.prototype.dispose=function(){this.component=null},t}();t.UIAnimation=e,__reflect(e.prototype,"gui.UIAnimation");var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.show=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.lastScaleX=this.component.scaleX,this.lastScaleY=this.component.scaleY,this.component.scaleX=0,this.component.scaleY=0,egret.Tween.get(this.component).to({scaleX:this.lastScaleX,scaleY:this.lastScaleY},300,egret.Ease.backOut).wait(100).call(t,e,i)},e.prototype.close=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];egret.Tween.get(this.component).to({alpha:0},300,egret.Ease.backIn).call(t,e,i)},e}(e);t.BoxAnimation=i,__reflect(i.prototype,"gui.BoxAnimation");var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.show=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this._orienX=this.component.x,this.component.x=this._orienX-720,egret.Tween.get(this.component).to({x:this._orienX},200).wait(100).call(t,e,i)},e.prototype.close=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];egret.Tween.get(this.component).to({x:this._orienX+720},300).call(t,e,i)},e}(e);t.SceneAnimation=n,__reflect(n.prototype,"gui.SceneAnimation")}(gui||(gui={}));var app_sound;!function(t){function e(t,e){r(s).playEffect(t,e)}function i(t){r(s).playBGM(t)}function n(){r(s).pauseBGM()}function o(){r(s).resumeBGM()}var r=gameTool.singleton;t.playEffect=e,t.playBGM=i,t.pauseBGM=n,t.resumeBGM=o;var s=function(){function t(){this.volume=.45,this._lastMusic=""}return t.prototype.init=function(t){t.addEventListener(egret.Event.DEACTIVATE,this.onBlur,this),t.addEventListener(egret.Event.ACTIVATE,this.onFocus,this)},t.prototype.playEffect=function(t,e){var i=RES.getRes(t);if(i){i.type=egret.Sound.EFFECT;var n=i.play(0,1);n.volume=e?e:this.volume}},t.prototype.playBGM=function(t){return this._lastMusic==t?(this.disposeSound(),void(this._soundChannel=this._sound.play())):(this._lastMusic=t,this._sound=RES.getRes(this._lastMusic),void(this._sound&&(this._sound.type=egret.Sound.MUSIC,this.disposeSound(),this._soundChannel=this._sound.play())))},t.prototype.pauseBGM=function(){this._soundChannel&&!this._soundChannel.isStopped&&(this._soundChannel.volume=0)},t.prototype.resumeBGM=function(){this._soundChannel&&!this._soundChannel.isStopped&&(this._soundChannel.volume=this.volume)},t.prototype.disposeSound=function(){this._soundChannel&&(this._soundChannel.stop(),this._soundChannel=null)},t.prototype.onBlur=function(){this.pauseBGM()},t.prototype.onFocus=function(){this.resumeBGM()},t}();t.SoundManager=s,__reflect(s.prototype,"app_sound.SoundManager")}(app_sound||(app_sound={}));var bind;!function(t){function e(t,e,i,n){gameTool.singleton(a).bindProperty(t,e,i,n)}function i(t,e,i,n){gameTool.singleton(a).bindHandler(t,e,i,n)}function n(t,e){gameTool.singleton(a).sendBind(t,e)}function o(t,e,i){gameTool.singleton(a).changeValue(t,e,i)}function r(t,e,i,n){gameTool.singleton(a).removeBind(t,e,i,n)}function s(t){gameTool.singleton(a).removeBindByObject(t)}var a=function(){function t(){this.bindFunciotnNamePre="__bind_fun__"}return t.prototype.bindProperty=function(t,e,i,n){var o=this.getHostInfo(t,e),r=this.bindFunciotnNamePre+o+"_"+n;i[r]=function(t){i[n]=t
},notification.addNotification(o,i[r],i)},t.prototype.bindHandler=function(t,e,i,n){var o=this.getHostInfo(t,e),r=this.bindFunciotnNamePre+o+"_"+gameTool.getTypeId(i);n[r]=i,notification.addNotification(o,n[r],n)},t.prototype.removeBind=function(t,e,i,n){var o=this.getHostInfo(t,e),r=this.bindFunciotnNamePre+o+"_"+("string"==typeof n?n:gameTool.getTypeId(n));notification.removeNotification(o,i[r],i),delete i[r]},t.prototype.removeBindByObject=function(t){for(var e=Object.keys(t),i=e.length,n=0;i>n;n++)if(e[n].indexOf(this.bindFunciotnNamePre)>-1){var o=e[n].substring(this.bindFunciotnNamePre.length,e[n].lastIndexOf("_"));notification.removeNotification(o,t[e[n]],t),delete t[e[n]]}},t.prototype.sendBind=function(t,e){var i=gameTool.getTypeId(t);notification.postNotification(i+"__"+e,t[e])},t.prototype.changeValue=function(t,e,i){t[e]=i;var n=gameTool.getTypeId(t);notification.postNotification(n+"__"+e,i)},t.prototype.getHostInfo=function(t,e){var i=t;if(e.length>1)for(var n=e.length,o=0;n-1>o;o++)i=i[e[o]];var r=gameTool.getTypeId(i),s=e[e.length-1];return r+"__"+s},t}();t.Binding=a,__reflect(a.prototype,"bind.Binding"),t.bindProperty=e,t.bindHandler=i,t.sendBind=n,t.changeValue=o,t.removeBind=r,t.removeBindByObject=s}(bind||(bind={}));var gameTool;!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n._runFun=new FunctionInfo,n._completeFun=new FunctionInfo,n}return __extends(e,t),e.prototype.dispose=function(){this.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this),this.reset(),this._runFun.dispose(),this._completeFun.dispose(),this._runFun=null,this._completeFun=null},e.prototype.restart=function(){this.reset(),this.start()},e.prototype.setRunCall=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this._runFun.fun=t,this._runFun.context=e,this._runFun.args=i,this.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this)},e.prototype.setRunArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._runFun.args=t},e.prototype.setCompleteCall=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this._completeFun.fun=t,this._completeFun.context=e,this._completeFun.args=i,this.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onTimerComplete,this)},e.prototype.setCompleteArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._completeFun.args=t},e.prototype.onTimer=function(){this._runFun.call()},e.prototype.onTimerComplete=function(){this._completeFun.call()},Object.defineProperty(e.prototype,"surplus",{get:function(){return this.repeatCount-this.currentCount},enumerable:!0,configurable:!0}),e}(egret.Timer);t.CustomTimer=e,__reflect(e.prototype,"gameTool.CustomTimer")}(gameTool||(gameTool={}));var dateTool;!function(t){function e(t,e){var i=new Date;t&&(e?i.setFullYear(t,e-1):i.setFullYear(t));var n=i.getMonth();return i.setMonth(n+1),i.setDate(0),i.getDate()}function i(t){return Math.floor(t/60)+"分"+Math.floor(t%60)+"秒"}function n(t){var e=Math.floor(.001*t);return Math.floor(e/60)+"分"+Math.floor(e%60)+"秒"+Math.floor(t%1e3*.1)+"毫秒"}function o(t){var e=t.split("-"),i=new Date;return i.setFullYear(parseInt(e[0]),parseInt(e[1])-1,parseInt(e[2])),i.setHours(e.length>3?parseInt(e[3]):0),i.setMinutes(e.length>4?parseInt(e[4]):0),i.setSeconds(e.length>5?parseInt(e[5]):0),i.getTime()}function r(t,e,i){return t>o(e)&&t<o(i)}t.getCountDays=e,t.getTime0=i,t.getTime1=n,t.timestrToTime=o,t.inTime=r}(dateTool||(dateTool={}));var definiton;!function(t){function e(t){var e=egret.getDefinitionByName(t);return e}function i(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=e(t);return new(o.bind.apply(o,[void 0].concat(i)))}function n(t){return null!=t.prototype}function o(t){if(!t.__proto__.hasOwnProperty("__class__"))return egret.getQualifiedClassName(t);var e=t.__proto__.__class__;return e}function r(t){return t.constructor}function s(t){return t.prototype.__class__}function a(t,e){return void 0!==this.getProperty(t,e)}function u(t,e){var i=t.prototype.__types__;return i&&i.length>0?i.indexOf(s(e))>-1:!1}function c(t,e){return t[e]}function l(t,e){return e.map(function(e){return t[e]})}t.getDefinitionType=e,t.getDefinitionInstance=i,t.isClass=n,t.getClassNameByObject=o,t.getClassByObject=r,t.getNameByClass=s,t.hasProperty=a,t.isExtends=u,t.getProperty=c,t.pluckPropertys=l}(definiton||(definiton={}));var delay;!function(t){function e(t){gameTool.singleton(s).createDelayMain(t)}function i(t){return gameTool.singleton(s).hasDelayMain(t)}function n(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];(o=gameTool.singleton(s)).addDelayTransact.apply(o,[t,e].concat(i));var o}function o(t){gameTool.singleton(s).executeAllTransact(t)}function r(t){gameTool.singleton(s).hasTransact(t)}var s=function(){function t(){this._delayMainList={},this._delayTransactList={}}return t.prototype.createDelayMain=function(t){var e=gameTool.getTypeId(t);null==this._delayMainList[e]&&(this._delayMainList[e]=t)},t.prototype.hasDelayMain=function(t){var e=gameTool.getTypeId(t);return null!=this._delayMainList[e]},t.prototype.addDelayTransact=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var o=gameTool.poolList.getInstance(FunctionInfo);o.context=t,o.fun=e,o.args=i;var r=gameTool.getTypeId(t);null==this._delayTransactList[r]?this._delayTransactList[r]=[o]:this._delayTransactList[r].push(o)},t.prototype.executeAllTransact=function(t){var e=gameTool.getTypeId(t);if(this._delayMainList[e]=null,delete this._delayMainList[e],this._delayTransactList[e]){for(var i=this._delayTransactList[e].length,n=0;i>n;n++)this._delayTransactList[e][n].onceCall();this._delayTransactList[e]=null,delete this._delayTransactList[e]}},t.prototype.hasTransact=function(t){var e=gameTool.getTypeId(t);return this._delayTransactList[e]?this._delayTransactList[e].length>0:!1},t}();t.DelayTransactManager=s,__reflect(s.prototype,"delay.DelayTransactManager"),t.createDelayMain=e,t.hasDelayMain=i,t.addDelayTransact=n,t.executeAllTransact=o,t.hasTransact=r}(delay||(delay={}));var gameTool;!function(t){function e(t){var e=new egret.RenderTexture,i=new egret.Rectangle(0,0,t.width,t.height);e.drawToTexture(t,i);var n=e.toDataURL("image/png");return n}t.renderTexture=e;var i=function(){function e(){}return e.setAnchor=function(t,e,i){void 0===i&&(i=e),t.anchorOffsetX=t.width*e,t.anchorOffsetY=t.height*i},Object.defineProperty(e,"stageW",{get:function(){return t.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e,"stageH",{get:function(){return t.stage.stageHeight},enumerable:!0,configurable:!0}),e.pointInScreen=function(t,e,i){var n=t.localToGlobal(e,i);return n.x>0&&n.y>0&&n.x<this.stageW&&n.y<this.stageH},e.inScreen=function(e){var i=e.getTransformedBounds(t.stage),n=this.stageW,o=this.stageH;return i.x>=-i.width&&i.x<=n&&i.y>=-i.height&&i.y<=o},e.setFullDisplay=function(t){t.width=this.stageW,t.height=this.stageH},e.getStagePosition=function(t,e){void 0===e&&(e=t);var i=this.stageW*t,n=this.stageH*e;return{x:i,y:n}},e.setPositionFromStage=function(t,e,i){void 0===e&&(e=.5),void 0===i&&(i=e);var n=this.getStagePosition(e,i);t.x=n.x,t.y=n.y},e.sort=function(t){for(var e=t.numChildren,i=[],n=0;e>n;n++)i.push(t.getChildAt(n));i.sort(function(t,e){return t.y-e.y}),i.forEach(function(e,i){t.setChildIndex(e,i)})},e.findTypeParent=function(t,e){for(var i=t.parent;i;){if(i instanceof e)return i;i=i.parent}return null},e.removeAllChildren=function(t){for(;t.numChildren>0;)t.removeChildAt(0)},e.localTolocal=function(t,e,i,n,o){return void 0===o&&(o=new egret.Point(t,e)),o=i.localToGlobal(t,e,o),o=n.globalToLocal(o.x,o.y,o)},e.getScale=function(t){for(var e={x:t.scaleX,y:t.scaleY};t.parent;)t=t.parent,e.x*=t.scaleX,e.y*=t.scaleY;return e},e}();t.display=i,__reflect(i.prototype,"gameTool.display")}(gameTool||(gameTool={}));var gameTool;!function(gameTool){function copy(t){gameTool.singleton(CopyUtil).copy(t)}function download(t,e){gameTool.singleton(Download).download(t,e)}var CopyUtil=function(){function CopyUtil(){this._element=document.createElement("button"),this._element.setAttribute("style","visibility: hidden"),document.body.appendChild(this._element);var data=document.createElement("h1");data.setAttribute("id","copy_data"),data.setAttribute("value",""),document.body.appendChild(data),eval("var clipboard = new Clipboard(this._element, {text: function() {return document.getElementById('copy_data').getAttribute('value');}}); \nclipboard.on('success', function(e) {console.log('success' + e);});\nclipboard.on('error', function(e) {console.log(e);});")}return CopyUtil.prototype.copy=function(t){this._element.focus(),document.getElementById("copy_data").setAttribute("value",t),this._element.click()},CopyUtil}();__reflect(CopyUtil.prototype,"CopyUtil");var Download=function(){function t(){this._element=document.createElement("a"),this._element.setAttribute("style","visibility: hidden"),document.body.appendChild(this._element)}return t.prototype.download=function(t,e){this._element.setAttribute("href",t),e&&this._element.setAttribute("download",e),this._element.click()},t}();gameTool.Download=Download,__reflect(Download.prototype,"gameTool.Download"),gameTool.copy=copy,gameTool.download=download}(gameTool||(gameTool={}));var js_tool;!function(t){function e(t,e,i){n.instance().startApp(t,e,i)}function i(t,e){void 0===e&&(e=null),n.instance().preload(t,e)}var n=function(){function t(){this.importList=[],this.importScriptsList=[]}return t.prototype.startApp=function(e,i,n){for(var o=0;o<e.length;o++)t.instance().addImportScript(e[o]);t.instance().preload(function(){i.apply(n)},function(t,e){})},t.instance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.preload=function(t,e){var i=this;void 0===e&&(e=null),this.totaltask=this.importList.length,this._process=e,this._complete=t,requestAnimationFrame(function(){i.importList.length>0?i.startLoadScript(null):i.onAllLoadComplete()})},t.prototype.reload=function(t,e){void 0===e&&(e=null);for(var i=document.head.childNodes.length-1;i>=0;i--){var n=document.head.childNodes[i];n instanceof HTMLScriptElement&&(this.importList.push(n.src),n.remove())}this.preload(t,e)},t.prototype.addImportScript=function(t){this.importList.push(t)},t.getXHR=function(){var t=null;return t=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},t.prototype.onAllLoadComplete=function(){this._process&&this._process(this.totaltask,0),this._complete&&(this.importList=[],this._complete())},t.prototype.startLoadScript=function(t){var e=this;if(this._process&&this._process(this.totaltask,this.importList.length),this.importList.length>0){var i=this.importList.shift();if(i.toLowerCase().indexOf(".js")>=0){var n=document.createElement("script");n.src=i,n.onload=function(t){return e.startLoadScript(t)},n.onerror=function(t){return e.loadScriptError(t)},document.head.appendChild(n),this.importScriptsList.push(n)}else if(i.toLowerCase().indexOf(".css")>=0){var o=document.createElement("link");o.rel="stylesheet",o.href=i,o.onload=function(t){return e.startLoadScript(t)},o.onerror=function(t){return e.loadScriptError(t)},document.head.appendChild(o)}}else this.onAllLoadComplete()},t.prototype.loadScriptError=function(t){var e="load Script Error \r\n no file:"+t.srcElement.src;alert(e),this.startLoadScript(null)},t}();t.jsLoader=n,__reflect(n.prototype,"js_tool.jsLoader"),t.startApp=e,t.preload=i}(js_tool||(js_tool={}));var tick;!function(t){var e=function(){function t(t){this._time=0,this._ticks={},this._removeTicks={},this._timer=new gameTool.CustomTimer(t),this._timer.setRunCall(this.onTicker,this)}return t.prototype.dispose=function(){this._timer.reset(),this._timer=null,this._ticks=null,this._removeTicks=null},t.prototype.start=function(t){t&&(this._timer.delay=t),this._timer.restart()},t.prototype.stop=function(){this._timer.reset()},t.prototype.startTick=function(t,e){var i=gameTool.getTypeId(e),n=gameTool.poolList.getInstance(FunctionInfo);n.context=e,n.fun=t,n.sleep=!1,this._ticks.hasOwnProperty(i)?mathTool.addValueByArray(n,this._ticks[i]):this._ticks[i]=[n]},t.prototype.stopTick=function(t,e){for(var i=gameTool.getTypeId(e),n=this._ticks[i],o=n.length,r=0;o>r;r++)if(n[r].fun==t)return n[r].sleep=!0,void this.getRemoveTicks(i).push(n[r])},t.prototype.stopTickByContext=function(t){var e=gameTool.getTypeId(t),i=this._ticks[e];if(null!=i)for(var n=i.length,o=this.getRemoveTicks(e),r=0;n>r;r++)i[r].sleep=!0,o.push(i[r])},t.prototype.onTicker=function(){var t=egret.getTimer();if(0==this._time)return void(this._time=t);var e=t-this._time;for(var i in this._ticks)for(var n=this._ticks[i],o=n.length,r=0;o>r;r++)n[r].args=[e],n[r].call();return this.removeTicks(),this._time=t,!1},t.prototype.getRemoveTicks=function(t){return null==this._removeTicks[t]&&(this._removeTicks[t]=[]),this._removeTicks[t]},t.prototype.removeTicks=function(){for(var t in this._removeTicks){for(var e=this._removeTicks[t],i=e.length,n=this._ticks[t],o=0;i>o;o++)gameTool.poolList.remove(e[o]),mathTool.cutValueByArray(e[o],n);0==n.length&&(this._ticks[t]=null,delete this._ticks[t])}this._removeTicks={}},t}();t.Loop=e,__reflect(e.prototype,"tick.Loop")}(tick||(tick={}));var map;!function(t){var e=function(){function t(t){this._keys=[],this._keys=t}return t.prototype.dispose=function(){this._keys=null,this._map=null,this._info=null},t.prototype.setValue=function(t,e){var i=this._keys.indexOf(t)>-1;return i&&this._map.removeByPro(this,t),this._info[t]=e,i&&this._map.addByPro(this,t),this},Object.defineProperty(t.prototype,"info",{get:function(){return this._info},set:function(t){this._info=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{set:function(t){this._map=t},enumerable:!0,configurable:!0}),t}();t.MapData=e,__reflect(e.prototype,"map.MapData");var i=function(){function t(t,e){this._mapList={},this._infoClass=t,this._mapList.__map_list=[],this._keys=e}return t.prototype.dispose=function(){for(var t=0;t<this.length;t++)this.getMapData(t).dispose();this._mapList=null,this._infoClass=null,this._keys=null},t.prototype.getNewMapData=function(){var t=new e(this._keys);return t.info=new this._infoClass,t.map=this,this.add(t),t},t.prototype.add=function(t){mathTool.addValueByArray(t,this._mapList.__map_list);for(var e=this._keys.length,i=0;e>i;i++)definiton.hasProperty(t.info,this._keys[i])?this.addByPro(t,this._keys[i]):trace.error("规定的类型与key映射有问题或未初始化"+this._keys[i])},t.prototype.remove=function(t){mathTool.cutValueByArray(t,this._mapList.__map_list);for(var e=this._keys.length,i=0;e>i;i++)definiton.hasProperty(t.info,this._keys[i])?this.removeByPro(t,this._keys[i]):trace.error("规定的类型与key映射有问题或未初始化"+this._keys[i])},t.prototype.addByPro=function(t,e){definiton.hasProperty(this._mapList,e)||(this._mapList[e]={});var i=t.info[e];if(null!=i){var n=this.getValueKey(i);definiton.hasProperty(this._mapList[e],n)||(this._mapList[e][n]=[]),mathTool.addValueByArray(t,this._mapList[e][n])}},t.prototype.removeByPro=function(t,e){if(definiton.hasProperty(this._mapList,e)){var i=t.info[e];if(null==i)return;var n=this.getValueKey(i);definiton.hasProperty(this._mapList[e],n)&&mathTool.cutValueByArray(t,this._mapList[e][n])}},t.prototype.getMapData=function(t){return this._mapList.__map_list[t]},t.prototype.getMapDatas=function(t,e){var i=this.getValueKey(e);return this._mapList[t][i]},t.prototype.getMapDataByPro=function(t,e){var i=this.getValueKey(e),n=this._mapList[t][i];return n&&n.length>0?n[0]:null},t.prototype.getValueKey=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"1":"0";case"number":return t.toString();default:return gameTool.getTypeId(t)}},Object.defineProperty(t.prototype,"length",{get:function(){return this._mapList.__map_list.length},enumerable:!0,configurable:!0}),t}();t.MapList=i,__reflect(i.prototype,"map.MapList")}(map||(map={}));var mathTool;!function(t){function e(t,e){void 0===e&&(e=.1);var i=t%1,n=.5-e,o=.5+e;return(i>>0)+(i>n&&o>i?1:0)}function i(t,e,i,n){return void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=10),e*Math.pow(Math.E,-(t-i)*(t-i)/(2*n*n))}function n(t,e){for(var i=0,n=t.length,r=0;n>r;r++)i+=o(e?t[r][e]:t[r]);return i}function o(t){return"string"==typeof t?isNaN(parseFloat(t))?0:parseFloat(t):t}function r(t,e){if(t.length!=e.length)return!1;for(var i=t.length,n=0;i>n;n++)if(-1==e.indexOf(t[n]))return!1;return!0}function s(t){return t.sort(function(){var t=Math.random();return t>.5?1:-1})}function a(t,e,i){for(var n=t.length,o=0;n>o;o++)if(t[o][e]==i)return o;return-1}function u(t,e){return t.map(function(t){return t[e]})}function c(t,e,i){void 0===i&&(i=null);for(var n=0;n<t.length;n++){var o=t[n];if(e&&e.call(i,o,n))return o}return null}function l(t,e,i){void 0===i&&(i=null);for(var n=[],o=0;o<t.length;o++){var r=t[o];e&&e.call(i,r,o)&&n.push(r)}return n}function h(t,e){for(var i=Object.keys(e),n=[],o=0;o<t.length;o++){var r=t[o],s=i.every(function(t){return r[t]==e[t]});s&&n.push(r)}return n}function p(e,i){var n=t.where(e,i);return n.length>0?n[0]:null}function d(t,e){if(!t||0==t.length)return!1;if(definiton.getClassNameByObject(e)!=definiton.getNameByClass(t[0])){var i=e,n=t.some(i);return n}var o=t.indexOf(e);return o>-1?!0:!1}function f(t,e,i,n){var o=t-i,r=e-n;return Math.sqrt(o*o+r*r)}function _(){return Math.random()>=.5?!0:!1}function g(t){return 180*t/Math.PI}function m(t){return t*Math.PI/180}function y(t,e){var i=e.indexOf(t);return-1!=i?(e.splice(i,1),!0):!1}function v(t,e){var i=e.indexOf(t);return-1==i?(e.push(t),!0):!1}function T(t){return t.splice(Math.random()*t.length>>0,1)[0]}function b(t){return t[Math.random()*t.length>>0]}function C(t,e){return Math.random()*(e-t)+t}function x(t){return t.sort(B),t}function L(t){var e=w(t);return e.sort(B),e}function w(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}function O(t,e,i,n){var o=n?1:-1;return e*o>t*o?t+=i*o:t=e,t}function I(t,e){void 0===e&&(e=1e4);var i=Math.random()*e,n=t.length,o=0;for(o=0;n>o;o++){if(i<t[o])return o;i-=t[o]}return-1}function P(t){var e=t.length,i=0,n=0;for(i=0;e>i;i++)n+=t[i];var o=Math.random()*n;for(i=0;e>i;i++){if(o<t[i])return i;o-=t[i]}return-1}function k(t){return C(1,1e4)<t}function E(t){var e=1/t,i=Math.ceil(Math.random()/e);return 0==i?1:i}function B(t,e){return _()?1:-1}function S(t,e,i,n,o,r,s){for(var a=e;o-n+1>a;a++)if(i[n-1]=a,n-1==0){for(var u=i.length,c=[],l=0;u>l;l++)c.push(t[i[l]]);r.apply(s,[c])}else S(t,a+1,i,n-1,o,r,s)}t.getValueByLimit=e,t.gaussian=i,t.sum=n,t.parseNumber=o,t.equalArray=r,t.shuffle=s,t.indexOfMap=a,t.pluck=u,t.find=c,t.findList=l,t.where=h,t.findWhere=p,t.contains=d,t.distance=f,t.getBoolean=_,t.radianToAngle=g,t.angleToRadian=m,t.cutValueByArray=y,t.addValueByArray=v,t.getArrayRandom=T,t.getArrayRandomValue=b,t.randomValue=C,t.randomArray=x,t.randomArrayCopy=L,t.getArrCopy=w,t.handlerMath=O,t.randomRateValue=I,t.autoRandomRateValue=P,t.getAtaru=k,t.getMeanNum=E,t.randomSort=B,t.combineArrayByNum=S}(mathTool||(mathTool={}));var objTool;!function(t){function e(t,e,i){return t&&t[e]?t[e]:i}function i(t,e){var i=Object.keys(e);return i.every(function(i){return t[i]==e[i]})}function n(t,e){var i=Object.keys(e);return i.every(function(e){return definiton.hasProperty(t,e)})}function o(t,e,i){void 0===i&&(i=!1);for(var n in e)i?t[n]=e[n]:s(t,e,n);return t}function r(t,e,i){void 0===i&&(i=!1);var n=new t;return o(n,e,i),n}function s(t,e,i){definiton.hasProperty(t,i)&&("number"==typeof t[i]&&"string"==typeof e[i]?t[i]=mathTool.parseNumber(e[i]):t[i]=e[i])}t.getValueByObjectKey=e,t.hasSameObj=i,t.hasObjProperty=n,t.mapObjProperty=o,t.mapObjPropertyToNew=r,t.mapSingleProperty=s}(objTool||(objTool={}));var RandomUtil=function(){function t(){}return t.getRandom=function(e,i,n){void 0===n&&(n=t.M);var o=5,r=(e+Math.pow(i,o))%n;return r},t.getRandomRate=function(e,i,n){void 0===n&&(n=t.M);var o=t.getRandom(e,i,n),r=o/n;return r},t.getRandomNum=function(e,i,n,o,r,s){void 0===r&&(r=0),void 0===s&&(s=-1);var a=[];if(0==n)return[];for(var u=0,c=1;;){var l=t.getRandom(e,c,i);if(o>=l&&l>=r&&l!=s&&-1==a.indexOf(l)&&(a.push(l),u++),c++,u==n)break}return a},t.getPrime=function(t,e){for(var i=[],n=1;;){for(var o=!0,r=2;n>r;r++)if(n%r==0){o=!1;break}if(o&&i.push(n),n++,i.length>=e)return i.splice(t,e-t)}},t.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.M=1299689,t}();__reflect(RandomUtil.prototype,"RandomUtil");var sound;!function(t){function e(t,e){var i=RES.getRes(t);i.type=egret.Sound.EFFECT;var n=i.play(0,1);n.volume=e?e:.5}function i(){return l(h).isMusicOpen()}function n(){return l(h).isEffectOpen()}function o(){l(h).switchMusic()}function r(){l(h).switchEffect()}function s(t,e){l(h).playEffect(t,e)}function a(t){l(h).playBGM(t)}function u(){l(h).pauseBGM()}function c(){l(h).resumeBGM()}var l=gameTool.singleton;t.playSound=e,t.isMusicOpen=i,t.isEffectOpen=n,t.switchMusic=o,t.switchEffect=r,t.playEffect=s,t.playBGM=a,t.pauseBGM=u,t.resumeBGM=c;var h=function(){function t(){this.volume=.45,this._lastMusic=""}return t.prototype.init=function(t){egret.localStorage.getItem("music")||this.switchMusic(),egret.localStorage.getItem("effect")||this.switchEffect(),t.addEventListener(egret.Event.DEACTIVATE,this.onBlur,this),t.addEventListener(egret.Event.ACTIVATE,this.onFocus,this)},t.prototype.isMusicOpen=function(){return"1"==egret.localStorage.getItem("music")},t.prototype.isEffectOpen=function(){return"1"==egret.localStorage.getItem("effect")},t.prototype.switchMusic=function(){this.isMusicOpen()?egret.localStorage.setItem("music","2"):egret.localStorage.setItem("music","1")},t.prototype.switchEffect=function(){this.isEffectOpen()?egret.localStorage.setItem("effect","2"):egret.localStorage.setItem("effect","1")},t.prototype.playEffect=function(t,e){if(this.isEffectOpen()){var i=RES.getRes(t);i.type=egret.Sound.EFFECT;var n=i.play(0,1);n.volume=e?e:this.volume}},t.prototype.playBGM=function(t){this._lastMusic!=t&&(this.disposeSound(),this._lastMusic=t,this.playMusic())},t.prototype.pauseBGM=function(){this.isMusicOpen()&&this._soundChannel&&!this._soundChannel.isStopped&&(this._soundChannel.volume=0)},t.prototype.resumeBGM=function(){this.isMusicOpen()&&this._soundChannel&&!this._soundChannel.isStopped&&(this._soundChannel.volume=this.volume)},t.prototype.disposeSound=function(){this._soundChannel&&(this._soundChannel.stop(),this._soundChannel=null),this._sound&&this._sound.removeEventListener(egret.Event.COMPLETE,this.soundLoaded,this)},t.prototype.onBlur=function(){this.pauseBGM()},t.prototype.onFocus=function(){this.resumeBGM()},t.prototype.playMusic=function(){this.isMusicOpen()&&RES.getResAsync(this._lastMusic,this.soundLoaded,this)},t.prototype.soundLoaded=function(){this.isMusicOpen()&&(this._sound=RES.getRes(this._lastMusic),this._sound.type=egret.Sound.MUSIC,this._soundChannel=this._sound.play(0,-1),this._soundChannel.volume=this.volume)},t}();t.SoundManager=h,__reflect(h.prototype,"sound.SoundManager")}(sound||(sound={}));var tick;!function(t){function e(){gameTool.singleton(s).start()}function i(){gameTool.singleton(s).stop()}function n(t,e){gameTool.singleton(s).startTick(t,e)}function o(t,e){gameTool.singleton(s).stopTick(t,e)}function r(t){gameTool.singleton(s).stopTickByContext(t)}t.running=!1;var s=function(){function e(){this._time=0,this._ticks={},this._removeTicks={}}return e.prototype.start=function(){egret.startTick(this.onTicker,this),t.running=!0},e.prototype.stop=function(){egret.stopTick(this.onTicker,this),t.running=!1},e.prototype.startTick=function(t,e){var i=gameTool.getTypeId(e),n=gameTool.poolList.getInstance(FunctionInfo);n.context=e,n.fun=t,n.sleep=!1,this._ticks.hasOwnProperty(i)?mathTool.addValueByArray(n,this._ticks[i]):this._ticks[i]=[n]},e.prototype.stopTick=function(t,e){for(var i=gameTool.getTypeId(e),n=this._ticks[i],o=n.length,r=0;o>r;r++)if(n[r].fun==t)return n[r].sleep=!0,void this.getRemoveTicks(i).push(n[r])},e.prototype.stopTickByContext=function(t){var e=gameTool.getTypeId(t),i=this._ticks[e];if(null!=i)for(var n=i.length,o=this.getRemoveTicks(e),r=0;n>r;r++)i[r].sleep=!0,o.push(i[r])},e.prototype.onTicker=function(t){if(0==this._time)return void(this._time=t);var e=t-this._time;for(var i in this._ticks)for(var n=this._ticks[i],o=n.length,r=0;o>r;r++)n[r].args=[e],n[r].call();return this.removeTicks(),this._time=t,!1},e.prototype.getRemoveTicks=function(t){return null==this._removeTicks[t]&&(this._removeTicks[t]=[]),this._removeTicks[t]},e.prototype.removeTicks=function(){for(var t in this._removeTicks){for(var e=this._removeTicks[t],i=e.length,n=this._ticks[t],o=0;i>o;o++)gameTool.poolList.remove(e[o]),mathTool.cutValueByArray(e[o],n);0==n.length&&(this._ticks[t]=null,delete this._ticks[t])}this._removeTicks={}},e}();t.TickManager=s,__reflect(s.prototype,"tick.TickManager"),t.start=e,t.stop=i,t.startTick=n,t.stopTick=o,t.stopTickByContext=r}(tick||(tick={}));var define;!function(t){var e=function(){function t(){}return t.DATA_UPDATE="DATA_UPDATE",t.CHANGE_DATA="CHANGE_DATA",t.OPEN_MODULE="OPEN_MODULE",t.MAP_VALUE_ADD="MAP_VALUE_ADD",t.MAP_VALUE_REMOVE="MAP_VALUE_REMOVE",t}();t.Notice=e,__reflect(e.prototype,"define.Notice")}(define||(define={}));var trace;!function(t){function e(t,e){void 0===e&&(e=null);var i=t;if(null!=e){var n=e.length,o=0;for(o=0;n>o;o++)i+="******"+e[o]}throw new Error(i)}function i(t){console.log(n(t))}function n(t){var e="",i=t.length,r=0;for(r=0;i>r;r++)e+=t[r]instanceof Array?"\n"+n(t[r])+"******":o(t[r])+"******";return e}function o(t){return null==t?"NULL":t.toString()}t.error=e,t.traceData=i,t.parseData=n,t.parseObject=o}(trace||(trace={}));var twwentool;!function(t){function e(t,e,i,n){void 0===i&&(i=300),isNaN(n)?n=parseInt(t.text):t.text=n.toString();var o={value:n},r={onChange:function(){t.text=""+Math.floor(o.value)},onChangeObj:this};return egret.Tween.get(o,r).to({value:e},i)}t.playNum=e}(twwentool||(twwentool={}));var config;!function(t){var e=function(){function t(t){void 0===t&&(t=!1),this._headerList={},this._posDataList={},this._keyList=[],this._isBig=t}return t.prototype.getType=function(t){return this._headerList[t]},t.prototype.decode=function(){this._items=[];for(var t in this._posDataList)this._items.push(this.parseItem(t))},t.prototype.getRecords=function(){return this._items},t.prototype.parseItem=function(t){this._data.position=this._posDataList[t];var e,i;if(this._flagBit<5)switch(this._flagBit){case 1:e=this._data.readUnsignedByte();break;case 2:e=this._data.readUnsignedShort();break;default:e=this._data.readUnsignedInt()}else e=this._data.readUnsignedInt(),i=this._data.readUnsignedByte();for(var n=this._headerTypes.length,o={},r=0;n>r;r++){var s=void 0;if(s=32>r?0!=(Math.pow(2,r)&e):0!=(Math.pow(2,r-32)&i))switch(this._headerTypes[r]){case"int":o[this._headers[r]]=this._data.readFloat();break;case"string":var a=this._data.readUnsignedShort();o[this._headers[r]]=this._data.readUTFBytes(a);break;default:var u=this._data.readUnsignedShort(),c=this._data.readUTFBytes(u);o[this._headers[r]]=c}}return o},t.prototype.parseBuffer=function(){var t=this._data.readUnsignedByte();for(this._headerTypes=[],this._headers=[];0!=t;){switch(t){case 1:this._headerTypes.push("int");break;case 2:this._headerTypes.push("string");break;default:this._headerTypes.push("table")}var e=this._data.readUnsignedByte(),i=this._data.readUTFBytes(e);this._headers.push(i),this._headerList[i]=this._headerTypes[this._headerTypes.length-1],t=this._data.readUnsignedByte()}this._flagBit=Math.floor((this._headers.length-1)/8)+1,3==this._flagBit&&(this._flagBit=4);for(var n=this._isBig?this._data.readUnsignedInt():this._data.readUnsignedShort(),o=0;n>o;o++){var r=this._data.readUnsignedShort(),s=this._data.readUnsignedShort();this._posDataList[s]&&(s=this._keyList[this._keyList.length-1]+1),this._posDataList[s]=this._data.position,this._keyList.push(s),this._data.position+=r}},Object.defineProperty(t.prototype,"data",{set:function(t){this._data=new egret.ByteArray(t),this.parseBuffer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyList",{get:function(){return this._keyList},enumerable:!0,configurable:!0}),t}();t.BSV=e,__reflect(e.prototype,"config.BSV",["face.IConfigParser"])}(config||(config={}));var config;!function(t){var e=function(e){function i(t,i){var n=e.call(this)||this;return n.typeDataClass=t,n.keyPropName=i,n.allDecoded=!1,n.useByteSrc=!1,n}return __extends(i,e),i.prototype.getTypeData=function(t){if(this.useByteSrc){if(!this._dic[t]){var e,i=this.config.parseItem(t);i&&(e=new this.typeDataClass,this.transformItem(e,i),this._dic[t]=e)}}else this.parseAll();return this._dic[t]},Object.defineProperty(i.prototype,"dic",{get:function(){return this.parseAll(),this._dic},enumerable:!0,configurable:!0}),i.prototype.parseAll=function(){if(!this.allDecoded){this.config.decode();var t,e,i,n=this.config.getRecords(),o=n.length;for(this._keys=[],t=0;o>t;t++)e=new this.typeDataClass,this.transformItem(e,n[t]),i=this.getKeyValue(e),this._dic[i]=e,this._keys.push(i);this.allDecoded=!0}},i.prototype.transformItem=function(e,i){var n,o;for(n in i)o=this.config.getType(n),"table"==o?e[n]=t.LuaObjUtil.parse(i[n]):"int"==o?e[n]=isNaN(parseFloat(i[n]))?i[n]:parseFloat(i[n]):e[n]=i[n]},i.prototype.getKeyValue=function(t){if("string"!=typeof this.keyPropName){var e,i=this.keyPropName.length,n="";for(e=0;i>e;e++)n+=t[this.keyPropName[e]],i-1>e&&(n+="&");return n}return t[this.keyPropName]},Object.defineProperty(i.prototype,"keys",{get:function(){return this.useByteSrc?this.config.keyList:(this.parseAll(),this._keys)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataSource",{set:function(e){if(this.data=e,this.useByteSrc="string"!=typeof this.data,this._dic={},this.useByteSrc)if("big"==e.type)this.config=new t.BSV(!0),this.config.data=e.data;else if("compress"==e.type){this.config=new t.BSV;var i=new Zlib.Inflate(new Uint8Array(e.data)),n=i.decompress();this.config.data=n.buffer}else this.config=new t.BSV,this.config.data=e;else{var o=new t.CSV;this.config=o,o.headerLineNum=0,o.resolveHeaderType=!0,this.config.data=e}this.allDecoded=!1},enumerable:!0,configurable:!0}),i}(egret.HashObject);t.BaseConfig=e,__reflect(e.prototype,"config.BaseConfig")}(config||(config={}));var config;!function(t){var e=function(){function e(){this.HeaderTypeDic={},this.fieldSeperator=",",this.fieldEnclosureToken='"',this.recordsetDelimiter="\n",this.comment="#",this.headerLineNum=0,this.header=new Array,this.embededHeader=!0,this.headerOverwrite=!1,this.resolveHeaderType=!1}return e.prototype.decode=function(){var e,i=0,n=[];this.data=this._data.split(this.recordsetDelimiter);for(var o=0;o<this._data.length;o++)e=this._data[o],i%2==0?n.push(e):n[n.length-1]+=e,i+=t.StringUtil.count(e,this.fieldEnclosureToken);n.forEach(this.fieldDetection,this),n=n.filter(this.isValidRecord,this),n=n.slice(this.headerLineNum),this.resolveHeaderType&&(this.HeaderType=n.shift()),this.embededHeader&&this.headerOverwrite?n.shift():this.embededHeader&&this.headerHasValues?n.shift():this.embededHeader&&(this.Header=n.shift()),this.data=n;for(var o=0;o<this.Header.length;o++)this.HeaderTypeDic[this.Header[o]]=this.HeaderType[o]},e.prototype.getType=function(t){return this.HeaderTypeDic[t]},e.prototype.getRecords=function(){var t=this.data;if(null==this.Header||null==t)return null;var e,i,n,o,r=this.Header.length,s=new Array,a=t.length;for(n=0;a>n;n++){for(e=t[n],i=new Object,o=0;r>o;o++)i[this.Header[o]]=e[o];s.push(i)}return s},e.prototype.search=function(t,e){void 0===e&&(e=!0);var i=new Array;if(this.data.forEach(function(e,n,o){"string"!=typeof t?t.forEach(function(t,n,o){e.indexOf(String(t))>=0&&i.push(e)}):e.indexOf(String(t))>=0&&i.push(e)}),e&&i.length>2)var n=i.length-1;for(;n--;)for(var o=i.length;--o>n;)i[n]==i[o]&&i.splice(o,1);return i},e.prototype.sort=function(t,e){void 0===t&&(t=0),void 0===e&&(e="ASC"),this.SortSequence=e,this.headerHasValues&&this.header.indexOf(t)>=0?this.SortField=this.header.indexOf(t):this.SortField=t,this.dataHasValues&&this.data.sort(this.sort2DArray)
},e.prototype.fieldDetection=function(e,i,n){for(var o,r=0,s=new Array,a=e.split(this.fieldSeperator),u=/\"(.*)\"/,c=0;c<a.length;c++)Boolean(r%2)?s[s.length-1]+=this.fieldSeperator+a[c]:s.push(a[c].trim()),r+=t.StringUtil.count(a[c],this.fieldEnclosureToken),Boolean(r%2)||(o=u.exec(s[s.length-1]),o&&(s[s.length-1]=o[1]));n[i]=s},e.prototype.sort2DArray=function(t,e){var i=0,n="ASC"==this.SortSequence?-1:1;return i=t[this.SortField]<e[this.SortField]?n:t[this.SortField]>e[this.SortField]?-n:0},e.prototype.isValidRecord=function(t,e,i){var n=!0,o=t.toString();return""==o.trim()&&(n=!1),0==o.indexOf(this._comment)&&(n=!1),n},e.prototype.dump=function(){for(var t="data:Array -> [\r",e=0;e<this.data.length;e++){t+="	["+e+"]:Array -> [\r";for(var i=0;i<this.data[e].length;i++)t+="		["+i+"]:String -> "+this.data[e][i]+"\r";t+="	]\r"}return t+="]\r"},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldSeperator",{get:function(){return this.FieldSeperator},set:function(t){this.FieldSeperator=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldEnclosureToken",{get:function(){return this.FieldEnclosureToken},set:function(t){this.FieldEnclosureToken=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordsetDelimiter",{get:function(){return this.RecordsetDelimiter},set:function(t){this.RecordsetDelimiter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"embededHeader",{get:function(){return this.EmbededHeader},set:function(t){this.EmbededHeader=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerOverwrite",{get:function(){return this.HeaderOverwrite},set:function(t){this.HeaderOverwrite=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resolveHeaderType",{get:function(){return this.ResolveHeaderType},set:function(t){this.ResolveHeaderType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"comment",{get:function(){return this._comment},set:function(t){this._comment=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerLineNum",{get:function(){return this._headerLineNum},set:function(t){this._headerLineNum=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this.Header},set:function(t){(!this.embededHeader&&!this.headerHasValues||!this.embededHeader&&this.headerHasValues&&this.headerOverwrite||this.headerOverwrite)&&(this.Header=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerHasValues",{get:function(){var t;try{this.Header.length>0&&(t=!0)}catch(e){t=!1}finally{return t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataHasValues",{get:function(){var t;try{this.content.length>0&&(t=!0)}catch(e){t=!1}finally{return t}},enumerable:!0,configurable:!0}),e}();t.CSV=e,__reflect(e.prototype,"config.CSV",["face.IConfigParser"])}(config||(config={}));var config;!function(t){var e=function(){function t(){}return t.parse=function(e){for(var i,n,o,r={},s=0;;){if(i=e.match(t.exp),!i||i.length<=0)break;for(var a=0;a<i.length;a++)n=this.parseItem(i[a],r),o=t.OBJECT_SIGN+s++,r[o]=n,e=e.replace(i[a],o)}return n},t.parseItem=function(e,i){var n,o,r;if("{}"==e)return{};var s,a,u;if(e.indexOf("=")>-1){var c=[];for(e=t.parseQuotation(e,t.quotationRule1,c),s=e.match(t.valueRule),n={},r=s.length,o=0;r>o;o+=2){if(a=i[s[o+1]],!a){a=s[o+1];var l=a.match(t.quotationRule3);l&&l.length?a=c[parseInt(l[0].substring(1,l[0].length-1))]:isNaN(a)||(a=parseFloat(a))}n[s[o]]=a}}else for(s=e.match(t.valueRule),n=s,r=s.length,o=0;r>o;o++)a=i[s[o]],a||(a=s[o],u=Number(a),isNaN(u)||(a=u)),n[o]=a;return n},t.parseQuotation=function(t,e,i){var n=t.match(e);if(!n||0==n.length)return t;for(var o=n.length,r=0;o>r;r++)t=t.replace(n[r],"&"+i.length+"&"),i.push(n[r].substring(1,n[r].length-1));return t},t.exp=/\{([^\{\}])*\}/g,t.valueRule=/[^,=\{\}'"]+/g,t.quotationRule1=/'([^'"])*'/g,t.quotationRule3=/&[\s\S]*&/g,t.OBJECT_SIGN="&lua",t}();t.LuaObjUtil=e,__reflect(e.prototype,"config.LuaObjUtil")}(config||(config={}));var config;!function(t){var e=function(){function t(){}return t.count=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),0===n&&(n=t.length);var o=0;for(t=t.slice(i,n);t.length>0&&-1!=t.indexOf(e);)t=t.slice(t.indexOf(e)+e.length),o++;return o},t.getFileName=function(t,e){if(void 0===e&&(e=!0),!t)return"";var i=t.indexOf("?")>0?t.split("?")[0]:t,n=2147483647;return 0==e&&(n=i.lastIndexOf(".")),-1==n&&(n=2147483647),i.indexOf("\\")>-1?t.substring(i.lastIndexOf("\\")+1,n):t.substring(i.lastIndexOf("/")+1,n)},t.getExtendsName=function(t){var e=t.indexOf("?")>0?t.split("?")[0]:t,i=e.lastIndexOf("."),n="";return i>-1&&(n=e.substr(i+1).toLowerCase()),n},t.getSourcePath=function(t,e){if(void 0===e&&(e=!0),!t)return"";var i=t.lastIndexOf("/");return-1==i&&(i=t.lastIndexOf("\\")),e&&(i+=1),t.substring(0,i)},t.trim=function(t){var e,i;for(e=0;e<length&&!(t.charCodeAt(e)>32);++e);for(i=t.length-1;i>=e&&!(t.charCodeAt(i)>32);--i);return t.substring(e,i+1)},t.getType=function(e){var i=t.getExtendsName(e);switch(i){case"png":case"jpg":case"png":return"image";case"txt":case"csv":return"text";case"json":return"json";case"zip":return"zip";case"dbp":return"dragonbones";default:return"bin"}},t}();t.StringUtil=e,__reflect(e.prototype,"config.StringUtil")}(config||(config={}));var loadUtil;!function(t){function e(t,e,i,n){void 0===e&&(e=null);for(var o=[],r=4;r<arguments.length;r++)o[r-4]=arguments[r];(a=gameTool.singleton(s)).loadGroup.apply(a,[t,e,i,n].concat(o));var a}function i(t,e,i,n){r(s).loadResource(t,e,i,n)}function n(t,e,n){t.indexOf(".data")>-1||t.indexOf(".gz")>-1?i(t,egret.URLLoaderDataFormat.BINARY,e,n):t.indexOf(".csv")>-1||t.indexOf(".txt")>-1||t.indexOf(".json")>-1?i(t,egret.URLLoaderDataFormat.TEXT,e,n):RES.getResAsync(t,e,n)}function o(t,e,i,n,o,r){var s=this;return void 0===r&&(r=0),0==t.length?void e.call(i):void this.loadConfigItem(t[r],function(a){a&&n&&n[r].call(o,a),r++,t.length==r?e.call(i):s.loadConfigItems(t,e,i,n,o,r)},this)}var r=gameTool.singleton,s=function(){function i(){this.loadRes=[],this._groupListens={}}return i.prototype.loadGroup=function(i,n,o,r){var s=this;void 0===n&&(n=null);for(var a=[],u=4;u<arguments.length;u++)a[u-4]=arguments[u];if(this._groupName=i,RES.isGroupLoaded(this._groupName))this._loadingView=null,o.apply(r,a);else{if(n){if(delay.hasDelayMain(this))return void delay.addDelayTransact.apply(delay,[this,e,i,n,o,r].concat(a));if(null==fairygui.UIPackage.getByName("load_ui"))return delay.createDelayMain(this),delay.addDelayTransact.apply(delay,[this,e,i,n,o,r].concat(a)),void t.loadGroup("load_ui",null,function(){fairygui.UIPackage.addPackage("load_ui"),delay.executeAllTransact(s)},this);this._loadingView=gui.addBox(n,i)}this._groupListens[this._groupName]=function(t){s._loadingView&&(gui.remove(s._loadingView),s._loadingView=null),o.apply(r,a),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,s._groupListens[t.groupName],s),s._groupListens[t.groupName]=null,delete s._groupListens[t.groupName]},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this._groupListens[this._groupName],this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(this._groupName),this.desGroup(this._groupName)}},i.prototype.desGroup=function(e){if(!(this.loadRes.indexOf(e)>-1||"fish"==e||"xq"==e)){this.loadRes.push(e);for(var i=this.loadRes.length-2;i>=0;i--)RES.destroyRes(this.loadRes[i])&&(fairygui.UIPackage.getByName(t.packName[this.loadRes[i]])&&fairygui.UIPackage.removePackage(fairygui.UIPackage.getByName(t.packName[this.loadRes[i]]).id),this.loadRes.splice(i,1))}},i.prototype.loadResource=function(t,e,i,n){var o=this,r=new egret.URLLoader,s=function(t){var e=t.currentTarget;e.removeEventListener(egret.Event.COMPLETE,s,o),i.call(n,e.data)};r.addEventListener(egret.Event.COMPLETE,s,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(t){console.log(t)},this),r.dataFormat=e;var a=new egret.URLRequest(t);r.load(a)},i.prototype.onItemLoadError=function(t){console.warn("资源组加载项加载出错 Url:"+t.resItem.url+" has failed to load")},i.prototype.onResourceLoadError=function(t){console.warn("资源组加载出错 Group:"+t.groupName+" has failed to load")},i.prototype.onResourceProgress=function(t){this._loadingView&&this._loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},i}();t.Loader=s,__reflect(s.prototype,"loadUtil.Loader"),t.loadGroup=e,t.loadResource=i,t.loadConfigItem=n,t.loadConfigItems=o}(loadUtil||(loadUtil={}));var loadUtil;!function(t){var e=function(){function t(){}return t.NONE=0,t.NORMAL=1,t}();t.LoadUIType=e,__reflect(e.prototype,"loadUtil.LoadUIType")}(loadUtil||(loadUtil={}));